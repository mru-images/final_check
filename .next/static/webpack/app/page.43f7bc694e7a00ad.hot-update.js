"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./app/page.tsx":
/*!**********************!*\
  !*** ./app/page.tsx ***!
  \**********************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ MusicPlayerApp; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _barrel_optimize_names_Home_Search_Settings_lucide_react__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! __barrel_optimize__?names=Home,Search,Settings!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/home.js\");\n/* harmony import */ var _barrel_optimize_names_Home_Search_Settings_lucide_react__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! __barrel_optimize__?names=Home,Search,Settings!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/search.js\");\n/* harmony import */ var _barrel_optimize_names_Home_Search_Settings_lucide_react__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! __barrel_optimize__?names=Home,Search,Settings!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/settings.js\");\n/* harmony import */ var _components_HomePage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/HomePage */ \"(app-pages-browser)/./components/HomePage.tsx\");\n/* harmony import */ var _components_SearchPage__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/components/SearchPage */ \"(app-pages-browser)/./components/SearchPage.tsx\");\n/* harmony import */ var _components_SettingsPage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/components/SettingsPage */ \"(app-pages-browser)/./components/SettingsPage.tsx\");\n/* harmony import */ var _components_PlaylistsPage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/components/PlaylistsPage */ \"(app-pages-browser)/./components/PlaylistsPage.tsx\");\n/* harmony import */ var _components_LikedSongsPage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @/components/LikedSongsPage */ \"(app-pages-browser)/./components/LikedSongsPage.tsx\");\n/* harmony import */ var _components_MinimizedPlayer__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/components/MinimizedPlayer */ \"(app-pages-browser)/./components/MinimizedPlayer.tsx\");\n/* harmony import */ var _components_MaximizedPlayer__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/components/MaximizedPlayer */ \"(app-pages-browser)/./components/MaximizedPlayer.tsx\");\n/* harmony import */ var _components_CreatePlaylistModal__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/components/CreatePlaylistModal */ \"(app-pages-browser)/./components/CreatePlaylistModal.tsx\");\n/* harmony import */ var _components_AddToPlaylistModal__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @/components/AddToPlaylistModal */ \"(app-pages-browser)/./components/AddToPlaylistModal.tsx\");\n/* harmony import */ var _components_AuthWrapper__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @/components/AuthWrapper */ \"(app-pages-browser)/./components/AuthWrapper.tsx\");\n/* harmony import */ var _components_SleepTimerModal__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @/components/SleepTimerModal */ \"(app-pages-browser)/./components/SleepTimerModal.tsx\");\n/* harmony import */ var _hooks_useAuth__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @/hooks/useAuth */ \"(app-pages-browser)/./hooks/useAuth.ts\");\n/* harmony import */ var _hooks_useSupabaseData__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @/hooks/useSupabaseData */ \"(app-pages-browser)/./hooks/useSupabaseData.ts\");\n/* harmony import */ var _hooks_useQueue__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @/hooks/useQueue */ \"(app-pages-browser)/./hooks/useQueue.ts\");\n/* harmony import */ var _hooks_useSleepTimer__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @/hooks/useSleepTimer */ \"(app-pages-browser)/./hooks/useSleepTimer.ts\");\n/* harmony import */ var _components_ThemeContext__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @/components/ThemeContext */ \"(app-pages-browser)/./components/ThemeContext.tsx\");\n/* harmony import */ var react_hot_toast__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! react-hot-toast */ \"(app-pages-browser)/./node_modules/react-hot-toast/dist/index.mjs\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction MusicPlayerContent() {\n    _s();\n    const { user } = (0,_hooks_useAuth__WEBPACK_IMPORTED_MODULE_13__.useAuth)();\n    const { songs, playlists, likedSongs, lastPlayedSong, loading, toggleLike, createPlaylist, deletePlaylist, renamePlaylist, addSongToPlaylist, removeSongFromPlaylist, recordListeningHistory, stopCurrentSongTracking, getPersonalizedSongs, getSmartPersonalizedSongs } = (0,_hooks_useSupabaseData__WEBPACK_IMPORTED_MODULE_14__.useSupabaseData)(user);\n    const { queue, addToQueue, removeFromQueue, getNextSongFromQueue, clearQueue, hasQueue } = (0,_hooks_useQueue__WEBPACK_IMPORTED_MODULE_15__.useQueue)();\n    const [activeTab, setActiveTab] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"home\");\n    const [currentPage, setCurrentPage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"main\");\n    const [currentSong, setCurrentSong] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isPlaying, setIsPlaying] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [isPlayerMaximized, setIsPlayerMaximized] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [showCreatePlaylistModal, setShowCreatePlaylistModal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [showAddToPlaylistModal, setShowAddToPlaylistModal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [showSleepTimerModal, setShowSleepTimerModal] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [selectedSongForPlaylist, setSelectedSongForPlaylist] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [hasSetLastPlayedSong, setHasSetLastPlayedSong] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [lastPlayedSongDismissed, setLastPlayedSongDismissed] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const { isDarkMode, toggleTheme } = (0,_components_ThemeContext__WEBPACK_IMPORTED_MODULE_17__.useTheme)();\n    const [displayCount, setDisplayCount] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(15);\n    const [imageUrls, setImageUrls] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)({});\n    const [audioUrl, setAudioUrl] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const audioRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [currentTime, setCurrentTime] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [duration, setDuration] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [volume, setVolume] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0.75); // default 75%\n    const [isSeeking, setIsSeeking] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [pendingSeekTime, setPendingSeekTime] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isExternallySeeking, setIsExternallySeeking] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [recommendedQueue, setRecommendedQueue] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [playedSongs, setPlayedSongs] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(new Set());\n    const [personalizedList, setPersonalizedList] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [currentSongIndex, setCurrentSongIndex] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const [listenedSongs, setListenedSongs] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(new Set());\n    const [isFetchingMore, setIsFetchingMore] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    // Smart recommendation system state\n    const [currentBatchListenedSongs, setCurrentBatchListenedSongs] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)([]);\n    const [songStartTime, setSongStartTime] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [batchStartIndex, setBatchStartIndex] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    // Shuffle and repeat state\n    const [isShuffleEnabled, setIsShuffleEnabled] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true); // Shuffle on by default\n    const [repeatMode, setRepeatMode] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"off\");\n    // Sleep timer\n    const { sleepTimer, remainingTime, startTimer, cancelTimer, triggerAfterSongTimer, isActive: isSleepTimerActive } = (0,_hooks_useSleepTimer__WEBPACK_IMPORTED_MODULE_16__.useSleepTimer)();\n    const loadMoreSongs = ()=>{\n        setDisplayCount((prev)=>prev + 15);\n    };\n    const displayedSongs = songs.slice(0, displayCount);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const loadAudio = async ()=>{\n            if (currentSong === null || currentSong === void 0 ? void 0 : currentSong.file_id) {\n                const url = \"/api/audio-proxy?fileid=\".concat(currentSong.file_id);\n                setAudioUrl(url);\n                setDuration(0);\n                setCurrentTime(0);\n                setPendingSeekTime(null);\n            }\n        };\n        loadAudio();\n    }, [\n        currentSong === null || currentSong === void 0 ? void 0 : currentSong.file_id\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (audioRef.current) {\n            audioRef.current.volume = volume;\n        }\n    }, [\n        volume\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const audio = audioRef.current;\n        if (!audio) return;\n        if (!isNaN(audio.duration) && isPlaying) {\n            // Duration is valid, safe to play\n            audio.play().catch((e)=>{\n                console.error(\"Playback error:\", e);\n            });\n        } else if (!isPlaying) {\n            audio.pause();\n        }\n    }, [\n        isPlaying\n    ]);\n    // Load images for currently displayed songs\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const fetchImages = async ()=>{\n            const newUrls = {};\n            // Songs from the main feed\n            const songsToLoad = songs.slice(0, displayCount);\n            for (const song of songsToLoad){\n                if (!imageUrls[song.id]) {\n                    newUrls[song.id] = \"/api/image-proxy?fileid=\".concat(song.img_id);\n                }\n            }\n            // Songs from playlists\n            for (const playlist of playlists){\n                for (const song of playlist.songs){\n                    if (!imageUrls[song.id]) {\n                        newUrls[song.id] = \"/api/image-proxy?fileid=\".concat(song.img_id);\n                    }\n                }\n            }\n            // Liked songs\n            for (const song of likedSongs){\n                if (!imageUrls[song.id]) {\n                    newUrls[song.id] = \"/api/image-proxy?fileid=\".concat(song.img_id);\n                }\n            }\n            // Apply if new URLs found\n            if (Object.keys(newUrls).length > 0) {\n                setImageUrls((prev)=>({\n                        ...prev,\n                        ...newUrls\n                    }));\n            }\n        };\n        fetchImages();\n    }, [\n        displayCount,\n        songs,\n        playlists,\n        likedSongs\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        console.log(\"\\uD83C\\uDFB5 personalizedList updated:\", personalizedList);\n    }, [\n        personalizedList\n    ]);\n    // Set last played song as current song when data loads (only once and if not dismissed)\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const loadLastPlayedImage = async ()=>{\n            if (user && lastPlayedSong && !hasSetLastPlayedSong && !lastPlayedSongDismissed) {\n                try {\n                    console.log(\"\\uD83C\\uDFB5 Loading initial personalized songs for last played song\");\n                    const initialRecs = await getPersonalizedSongs(user.id, lastPlayedSong, listenedSongs);\n                    const filtered = initialRecs.filter((song)=>!playedSongs.has(song.file_id.toString()));\n                    const newPersonalizedList = [\n                        lastPlayedSong,\n                        ...filtered.slice(0, 4)\n                    ];\n                    setPersonalizedList(newPersonalizedList);\n                    console.log(\"✅ Initial personalized list set:\", newPersonalizedList.length, \"songs\");\n                } catch (error) {\n                    console.error(\"❌ Error loading initial personalized songs:\", error);\n                    setPersonalizedList([\n                        lastPlayedSong\n                    ]);\n                }\n                setCurrentSong(lastPlayedSong);\n                setHasSetLastPlayedSong(true);\n                // Add to listened songs and log\n                setListenedSongs((prev)=>{\n                    const newSet = new Set(prev);\n                    newSet.add(lastPlayedSong.file_id.toString());\n                    console.log(\"\\uD83C\\uDFB5 Listened Songs List:\", Array.from(newSet));\n                    return newSet;\n                });\n                if (!imageUrls[lastPlayedSong.img_id]) {\n                    const url = \"/api/image-proxy?fileid=\".concat(lastPlayedSong.img_id);\n                    setImageUrls((prev)=>({\n                            ...prev,\n                            [lastPlayedSong.img_id]: url\n                        }));\n                }\n            }\n        };\n        loadLastPlayedImage();\n    }, [\n        lastPlayedSong,\n        hasSetLastPlayedSong,\n        lastPlayedSongDismissed,\n        user,\n        getPersonalizedSongs\n    ]);\n    const handleSongPlay = async (song)=>{\n        // Record if previous song was listened to (>20 seconds)\n        if (currentSong && songStartTime) {\n            const listenDuration = (new Date().getTime() - songStartTime.getTime()) / 1000;\n            if (listenDuration > 20) {\n                console.log('✅ User listened to \"'.concat(currentSong.name, '\" for ').concat(listenDuration.toFixed(1), \" seconds\"));\n                setCurrentBatchListenedSongs((prev)=>{\n                    const exists = prev.some((s)=>s.file_id === currentSong.file_id);\n                    if (!exists) {\n                        const updated = [\n                            ...prev,\n                            currentSong\n                        ];\n                        console.log(\"\\uD83C\\uDFB5 Current batch listened songs:\", updated.map((s)=>s.name));\n                        return updated;\n                    }\n                    return prev;\n                });\n            } else {\n                console.log('⏭️ User skipped \"'.concat(currentSong.name, '\" after ').concat(listenDuration.toFixed(1), \" seconds\"));\n            }\n        }\n        setCurrentSong(song);\n        setIsPlaying(true);\n        setLastPlayedSongDismissed(false);\n        recordListeningHistory(song.id);\n        setSongStartTime(new Date()); // Track when this song started\n        // Add to listened songs and log\n        setListenedSongs((prev)=>{\n            const newSet = new Set(prev);\n            newSet.add(song.file_id.toString());\n            console.log(\"\\uD83C\\uDFB5 Listened Songs List:\", Array.from(newSet));\n            return newSet;\n        });\n        setPlayedSongs((prev)=>{\n            const updated = new Set(prev);\n            updated.add(song.file_id.toString());\n            return updated;\n        });\n        if (user) {\n            try {\n                console.log(\"\\uD83C\\uDFB5 Fetching personalized songs for:\", song.name);\n                const recs = await getPersonalizedSongs(user.id, song, listenedSongs);\n                const filtered = recs.filter((s)=>!playedSongs.has(s.file_id.toString()));\n                const newPersonalizedList = [\n                    song,\n                    ...filtered.slice(0, 4)\n                ];\n                setPersonalizedList(newPersonalizedList);\n                setCurrentSongIndex(0);\n                setBatchStartIndex(0);\n                setCurrentBatchListenedSongs([]); // Reset batch for new song selection\n                console.log(\"✅ New personalized list set:\", newPersonalizedList.length, \"songs\");\n            } catch (error) {\n                console.error(\"❌ Error fetching personalized songs:\", error);\n                setPersonalizedList([\n                    song\n                ]);\n                setCurrentSongIndex(0);\n                setBatchStartIndex(0);\n                setCurrentBatchListenedSongs([]);\n            }\n        }\n    };\n    const handleAddToQueue = (song)=>{\n        addToQueue(song);\n        react_hot_toast__WEBPACK_IMPORTED_MODULE_18__.toast.success('Added \"'.concat(song.name, '\" to queue'));\n    };\n    const togglePlay = ()=>{\n        setIsPlaying(!isPlaying);\n    };\n    const togglePlayerSize = ()=>{\n        setIsPlayerMaximized(!isPlayerMaximized);\n    };\n    const closePlayer = async ()=>{\n        // Stop tracking current song before closing\n        await stopCurrentSongTracking();\n        setCurrentSong(null);\n        setIsPlaying(false);\n        setIsPlayerMaximized(false);\n        // Mark last played song as dismissed so it won't auto-load again\n        setLastPlayedSongDismissed(true);\n    };\n    const handleToggleLike = (songId)=>{\n        toggleLike(songId);\n        // Update current song state if it's the one being liked/unliked\n        if (currentSong && currentSong.id === songId) {\n            setCurrentSong((prev)=>prev ? {\n                    ...prev,\n                    isLiked: !prev.isLiked\n                } : null);\n        }\n    };\n    const handlePrevious = ()=>{\n        // Record if current song was listened to before going to previous\n        if (currentSong && songStartTime) {\n            const listenDuration = (new Date().getTime() - songStartTime.getTime()) / 1000;\n            if (listenDuration > 20) {\n                console.log('✅ User listened to \"'.concat(currentSong.name, '\" for ').concat(listenDuration.toFixed(1), \" seconds\"));\n                setCurrentBatchListenedSongs((prev)=>{\n                    const exists = prev.some((s)=>s.file_id === currentSong.file_id);\n                    if (!exists) {\n                        const updated = [\n                            ...prev,\n                            currentSong\n                        ];\n                        console.log(\"\\uD83C\\uDFB5 Current batch listened songs:\", updated.map((s)=>s.name));\n                        return updated;\n                    }\n                    return prev;\n                });\n            }\n        }\n        if (!currentSong) return;\n        // Check if there's a previous song in the personalized list\n        if (currentSongIndex > 0) {\n            const prevIndex = currentSongIndex - 1;\n            const prevSong = personalizedList[prevIndex];\n            if (prevSong) {\n                setCurrentSong(prevSong);\n                setCurrentSongIndex(prevIndex);\n                setIsPlaying(true);\n                setLastPlayedSongDismissed(false);\n                recordListeningHistory(prevSong.id);\n                setSongStartTime(new Date());\n                // Add to listened songs and log\n                setListenedSongs((prev)=>{\n                    const newSet = new Set(prev);\n                    newSet.add(prevSong.file_id.toString());\n                    console.log(\"\\uD83C\\uDFB5 Listened Songs List:\", Array.from(newSet));\n                    return newSet;\n                });\n                setPlayedSongs((prev)=>{\n                    const updated = new Set(prev);\n                    updated.add(prevSong.file_id.toString());\n                    return updated;\n                });\n                // Preload image\n                if (!imageUrls[prevSong.img_id]) {\n                    const newUrl = \"/api/image-proxy?fileid=\".concat(prevSong.img_id);\n                    setImageUrls((prev)=>({\n                            ...prev,\n                            [prevSong.img_id]: newUrl\n                        }));\n                }\n            }\n        } else {\n            // If at the beginning, just restart current song\n            setCurrentTime(0);\n            setIsPlaying(true);\n        }\n    };\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!currentSong) return;\n        const currentIndex = songs.findIndex((song)=>song.id === currentSong.id);\n        const nextIndex = currentIndex < songs.length - 1 ? currentIndex + 1 : 0;\n        const nextSong = songs[nextIndex];\n        // Preload next song image if not in cache\n        if (nextSong && !imageUrls[nextSong.img_id]) {\n            const newUrl = \"/api/image-proxy?fileid=\".concat(nextSong.img_id);\n            setImageUrls((prev)=>({\n                    ...prev,\n                    [nextSong.img_id]: newUrl\n                }));\n        }\n    }, [\n        currentSong,\n        songs\n    ]);\n    const handleLoadedMetadata = async ()=>{\n        const audio = audioRef.current;\n        if (!audio) return;\n        const loadedDuration = audio.duration;\n        if (!isNaN(loadedDuration) && isFinite(loadedDuration)) {\n            setDuration(loadedDuration);\n            if (pendingSeekTime !== null) {\n                audio.currentTime = pendingSeekTime;\n                setCurrentTime(pendingSeekTime);\n                setPendingSeekTime(null);\n            } else {\n                setCurrentTime(audio.currentTime);\n            }\n            try {\n                if (isPlaying) {\n                    await audio.play();\n                }\n            } catch (err) {\n                console.error(\"Auto-play error after metadata load:\", err);\n            }\n        } else {\n            // Retry metadata read\n            setTimeout(handleLoadedMetadata, 100);\n        }\n    };\n    const handleNext = async ()=>{\n        // Record if current song was listened to before going to next\n        if (currentSong && songStartTime) {\n            const listenDuration = (new Date().getTime() - songStartTime.getTime()) / 1000;\n            if (listenDuration > 20) {\n                console.log('✅ User listened to \"'.concat(currentSong.name, '\" for ').concat(listenDuration.toFixed(1), \" seconds\"));\n                setCurrentBatchListenedSongs((prev)=>{\n                    const exists = prev.some((s)=>s.file_id === currentSong.file_id);\n                    if (!exists) {\n                        const updated = [\n                            ...prev,\n                            currentSong\n                        ];\n                        console.log(\"\\uD83C\\uDFB5 Current batch listened songs:\", updated.map((s)=>s.name));\n                        return updated;\n                    }\n                    return prev;\n                });\n            } else {\n                console.log('⏭️ User skipped \"'.concat(currentSong.name, '\" after ').concat(listenDuration.toFixed(1), \" seconds\"));\n            }\n        }\n        if (!currentSong) return;\n        // Check if there's a song in the queue first\n        const nextQueueSong = getNextSongFromQueue();\n        if (nextQueueSong) {\n            setCurrentSong(nextQueueSong);\n            setIsPlaying(true);\n            setLastPlayedSongDismissed(false);\n            recordListeningHistory(nextQueueSong.id);\n            setSongStartTime(new Date());\n            // Add to listened songs and log\n            setListenedSongs((prev)=>{\n                const newSet = new Set(prev);\n                newSet.add(nextQueueSong.file_id.toString());\n                console.log(\"\\uD83C\\uDFB5 Listened Songs List:\", Array.from(newSet));\n                return newSet;\n            });\n            // Update personalized list with the queue song\n            if (user) {\n                const recs = await getPersonalizedSongs(user.id, nextQueueSong, listenedSongs);\n                const filtered = recs.filter((s)=>!playedSongs.has(s.file_id));\n                const newPersonalizedList = [\n                    nextQueueSong,\n                    ...filtered.slice(0, 4)\n                ];\n                setPersonalizedList(newPersonalizedList);\n                setCurrentSongIndex(0);\n            }\n            // Preload image\n            if (!imageUrls[nextQueueSong.img_id]) {\n                const newUrl = \"/api/image-proxy?fileid=\".concat(nextQueueSong.img_id);\n                setImageUrls((prev)=>({\n                        ...prev,\n                        [nextQueueSong.img_id]: newUrl\n                    }));\n            }\n            return;\n        }\n        // Check if we're at the second-to-last song and need to fetch smart recommendations\n        if (currentSongIndex === personalizedList.length - 2 && !isFetchingMore && user && currentSong) {\n            console.log(\"\\uD83E\\uDDE0 At second-to-last song, checking for smart recommendations...\");\n            setIsFetchingMore(true);\n            try {\n                let newRecs = [];\n                // If we have songs that user actually listened to in current batch, use smart recommendations\n                if (currentBatchListenedSongs.length > 0) {\n                    console.log(\"\\uD83E\\uDDE0 Using smart recommendations based on listened songs\");\n                    newRecs = await getSmartPersonalizedSongs(user.id, currentBatchListenedSongs, new Set([\n                        ...Array.from(listenedSongs),\n                        ...personalizedList.map((s)=>s.file_id.toString())\n                    ]));\n                } else {\n                    console.log(\"\\uD83C\\uDFB5 No listened songs in batch, using regular recommendations\");\n                    newRecs = await getPersonalizedSongs(user.id, currentSong, listenedSongs);\n                }\n                const filtered = newRecs.filter((song)=>!playedSongs.has(song.file_id.toString()) && !listenedSongs.has(song.file_id.toString()) && !personalizedList.some((existing)=>existing.file_id === song.file_id));\n                if (filtered.length > 0) {\n                    setPersonalizedList((prev)=>[\n                            ...prev,\n                            ...filtered.slice(0, 5)\n                        ]);\n                    console.log(\"✅ Added\", filtered.slice(0, 5).length, \"smart recommendations to personalized list\");\n                }\n            } catch (error) {\n                console.error(\"❌ Error fetching smart recommendations:\", error);\n            } finally{\n                setIsFetchingMore(false);\n            }\n        }\n        // If no queue, proceed with personalized list\n        const nextIndex = currentSongIndex + 1;\n        if (nextIndex < personalizedList.length) {\n            const nextSong = personalizedList[nextIndex];\n            setCurrentSong(nextSong);\n            setCurrentSongIndex(nextIndex);\n            setIsPlaying(true);\n            setLastPlayedSongDismissed(false);\n            recordListeningHistory(nextSong.id);\n            setSongStartTime(new Date());\n            // Add to listened songs and log\n            setListenedSongs((prev)=>{\n                const newSet = new Set(prev);\n                newSet.add(nextSong.file_id.toString());\n                console.log(\"\\uD83C\\uDFB5 Listened Songs List:\", Array.from(newSet));\n                return newSet;\n            });\n            setPlayedSongs((prev)=>{\n                const updated = new Set(prev);\n                updated.add(String(nextSong.file_id));\n                return updated;\n            });\n            // Preload image\n            if (!imageUrls[nextSong.img_id]) {\n                const newUrl = \"/api/image-proxy?fileid=\".concat(nextSong.img_id);\n                setImageUrls((prev)=>({\n                        ...prev,\n                        [nextSong.img_id]: newUrl\n                    }));\n            }\n        } else {\n            // If we've reached the end of personalized list, get new smart recommendations\n            if (user && currentSong) {\n                try {\n                    console.log(\"\\uD83E\\uDDE0 Reached end of list, fetching new smart recommendations\");\n                    let newRecs = [];\n                    // Use smart recommendations if we have listened songs in current batch\n                    if (currentBatchListenedSongs.length > 0) {\n                        console.log(\"\\uD83E\\uDDE0 Using smart recommendations for new batch\");\n                        newRecs = await getSmartPersonalizedSongs(user.id, currentBatchListenedSongs, listenedSongs);\n                    } else {\n                        console.log(\"\\uD83C\\uDFB5 Using regular recommendations for new batch\");\n                        newRecs = await getPersonalizedSongs(user.id, currentSong, listenedSongs);\n                    }\n                    const filtered = newRecs.filter((song)=>!playedSongs.has(song.file_id.toString()) && !listenedSongs.has(song.file_id.toString()));\n                    if (filtered.length > 0) {\n                        const nextSong = filtered[0];\n                        setCurrentSong(nextSong);\n                        setIsPlaying(true);\n                        setLastPlayedSongDismissed(false);\n                        recordListeningHistory(nextSong.id);\n                        setSongStartTime(new Date());\n                        // Add to listened songs and log\n                        setListenedSongs((prev)=>{\n                            const newSet = new Set(prev);\n                            newSet.add(nextSong.file_id.toString());\n                            console.log(\"\\uD83C\\uDFB5 Listened Songs List:\", Array.from(newSet));\n                            return newSet;\n                        });\n                        // Create new personalized list starting with this song\n                        const newPersonalizedList = [\n                            nextSong,\n                            ...filtered.slice(1, 5)\n                        ];\n                        setPersonalizedList(newPersonalizedList);\n                        setCurrentSongIndex(0);\n                        setBatchStartIndex(0);\n                        setCurrentBatchListenedSongs([]); // Reset batch for new recommendations\n                        setPlayedSongs((prev)=>{\n                            const updated = new Set(prev);\n                            updated.add(nextSong.file_id.toString());\n                            return updated;\n                        });\n                        // Preload image\n                        if (!imageUrls[nextSong.img_id]) {\n                            const newUrl = \"/api/image-proxy?fileid=\".concat(nextSong.img_id);\n                            setImageUrls((prev)=>({\n                                    ...prev,\n                                    [nextSong.img_id]: newUrl\n                                }));\n                        }\n                        console.log(\"✅ New smart recommendations loaded:\", newPersonalizedList.length, \"songs\");\n                    } else {\n                        console.warn(\"⚠️ No more smart recommendations available\");\n                    }\n                } catch (error) {\n                    console.error(\"❌ Error fetching new smart recommendations:\", error);\n                }\n            }\n        }\n    };\n    const formatNumber = (num)=>{\n        if (num >= 1000000) {\n            return (num / 1000000).toFixed(1) + \"M\";\n        } else if (num >= 1000) {\n            return (num / 1000).toFixed(1) + \"K\";\n        }\n        return num.toString();\n    };\n    const handleAddToPlaylist = (song)=>{\n        setSelectedSongForPlaylist(song);\n        setShowAddToPlaylistModal(true);\n    };\n    const handleSongEnd = async ()=>{\n        // Check if sleep timer is set to \"after-song\" and trigger it\n        if (sleepTimer === \"after-song\") {\n            triggerAfterSongTimer();\n            return;\n        }\n        // Record if song was listened to completely (assume >20 seconds if it ended naturally)\n        if (currentSong && songStartTime) {\n            const listenDuration = (new Date().getTime() - songStartTime.getTime()) / 1000;\n            console.log('\\uD83C\\uDFB5 Song \"'.concat(currentSong.name, '\" ended after ').concat(listenDuration.toFixed(1), \" seconds\"));\n            if (listenDuration > 20) {\n                setCurrentBatchListenedSongs((prev)=>{\n                    const exists = prev.some((s)=>s.file_id === currentSong.file_id);\n                    if (!exists) {\n                        const updated = [\n                            ...prev,\n                            currentSong\n                        ];\n                        console.log(\"\\uD83C\\uDFB5 Current batch listened songs:\", updated.map((s)=>s.name));\n                        return updated;\n                    }\n                    return prev;\n                });\n            }\n        }\n        // Handle repeat modes\n        if (repeatMode === \"once\" || repeatMode === \"infinite\") {\n            // Restart the current song\n            setCurrentTime(0);\n            setIsPlaying(true);\n            setSongStartTime(new Date());\n            // If repeat once, turn off repeat after playing once\n            if (repeatMode === \"once\") {\n                setRepeatMode(\"off\");\n            }\n            return;\n        }\n        // When a song ends, automatically play the next one\n        await handleNext();\n    };\n    const handleSleepTimerSet = (minutes)=>{\n        if (minutes === null) {\n            cancelTimer();\n        } else {\n            startTimer(minutes, ()=>{\n                setIsPlaying(false);\n                react_hot_toast__WEBPACK_IMPORTED_MODULE_18__.toast.success(\"Sleep timer ended - music stopped\");\n            });\n            if (typeof minutes === \"number\") {\n                react_hot_toast__WEBPACK_IMPORTED_MODULE_18__.toast.success(\"Sleep timer set for \".concat(minutes, \" minutes\"));\n            } else {\n                react_hot_toast__WEBPACK_IMPORTED_MODULE_18__.toast.success(\"Sleep timer set to stop after current song\");\n            }\n        }\n    };\n    const renderContent = ()=>{\n        if (currentPage === \"playlists\") {\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_PlaylistsPage__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                playlists: playlists,\n                onBack: ()=>setCurrentPage(\"main\"),\n                onSongPlay: handleSongPlay,\n                onAddToQueue: handleAddToQueue,\n                onCreatePlaylist: ()=>setShowCreatePlaylistModal(true),\n                onDeletePlaylist: deletePlaylist,\n                onRenamePlaylist: renamePlaylist,\n                onRemoveSongFromPlaylist: removeSongFromPlaylist,\n                imageUrls: imageUrls\n            }, void 0, false, {\n                fileName: \"/home/project/app/page.tsx\",\n                lineNumber: 709,\n                columnNumber: 9\n            }, this);\n        }\n        if (currentPage === \"liked\") {\n            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_LikedSongsPage__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                songs: likedSongs,\n                onBack: ()=>setCurrentPage(\"main\"),\n                onSongPlay: handleSongPlay,\n                onAddToQueue: handleAddToQueue,\n                imageUrls: imageUrls\n            }, void 0, false, {\n                fileName: \"/home/project/app/page.tsx\",\n                lineNumber: 724,\n                columnNumber: 14\n            }, this);\n        }\n        switch(activeTab){\n            case \"home\":\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_HomePage__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                    songs: displayedSongs,\n                    onSongPlay: handleSongPlay,\n                    formatNumber: formatNumber,\n                    onAddToPlaylist: handleAddToPlaylist,\n                    onAddToQueue: handleAddToQueue,\n                    imageUrls: imageUrls,\n                    onLoadMore: loadMoreSongs,\n                    hasMoreSongs: displayCount < songs.length\n                }, void 0, false, {\n                    fileName: \"/home/project/app/page.tsx\",\n                    lineNumber: 729,\n                    columnNumber: 16\n                }, this);\n            case \"search\":\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_SearchPage__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                    songs: songs,\n                    onSongPlay: handleSongPlay,\n                    formatNumber: formatNumber,\n                    onAddToPlaylist: handleAddToPlaylist,\n                    onAddToQueue: handleAddToQueue,\n                    imageUrls: imageUrls,\n                    setImageUrls: setImageUrls\n                }, void 0, false, {\n                    fileName: \"/home/project/app/page.tsx\",\n                    lineNumber: 740,\n                    columnNumber: 16\n                }, this);\n            case \"settings\":\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_SettingsPage__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                    onPlaylistsClick: ()=>setCurrentPage(\"playlists\"),\n                    onLikedClick: ()=>setCurrentPage(\"liked\")\n                }, void 0, false, {\n                    fileName: \"/home/project/app/page.tsx\",\n                    lineNumber: 750,\n                    columnNumber: 16\n                }, this);\n            default:\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_HomePage__WEBPACK_IMPORTED_MODULE_2__[\"default\"], {\n                    songs: displayedSongs,\n                    onSongPlay: handleSongPlay,\n                    formatNumber: formatNumber,\n                    onAddToPlaylist: handleAddToPlaylist,\n                    onAddToQueue: handleAddToQueue,\n                    imageUrls: imageUrls,\n                    onLoadMore: loadMoreSongs,\n                    hasMoreSongs: displayCount < songs.length\n                }, void 0, false, {\n                    fileName: \"/home/project/app/page.tsx\",\n                    lineNumber: 752,\n                    columnNumber: 16\n                }, this);\n        }\n    };\n    const themeClasses = isDarkMode ? \"bg-gray-900 text-white\" : \"bg-gray-50 text-gray-900\";\n    const setCurrentTimeState = setCurrentTime;\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"min-h-screen \".concat(themeClasses, \" relative overflow-hidden\"),\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"transition-all duration-300 \".concat(currentSong ? \"pb-36\" : \"pb-20\"),\n                children: renderContent()\n            }, void 0, false, {\n                fileName: \"/home/project/app/page.tsx\",\n                lineNumber: 774,\n                columnNumber: 9\n            }, this),\n            currentPage === \"main\" && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"fixed bottom-0 left-0 right-0 \".concat(isDarkMode ? \"bg-gray-800 border-gray-700\" : \"bg-white border-gray-200\", \" border-t z-30\"),\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center justify-around py-3\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: ()=>setActiveTab(\"home\"),\n                            className: \"flex flex-col items-center space-y-1 p-2 transition-colors \".concat(activeTab === \"home\" ? \"text-purple-400\" : isDarkMode ? \"text-gray-400\" : \"text-gray-600\"),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Home_Search_Settings_lucide_react__WEBPACK_IMPORTED_MODULE_19__[\"default\"], {\n                                    size: 24\n                                }, void 0, false, {\n                                    fileName: \"/home/project/app/page.tsx\",\n                                    lineNumber: 788,\n                                    columnNumber: 17\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-xs\",\n                                    children: \"Home\"\n                                }, void 0, false, {\n                                    fileName: \"/home/project/app/page.tsx\",\n                                    lineNumber: 789,\n                                    columnNumber: 17\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/project/app/page.tsx\",\n                            lineNumber: 782,\n                            columnNumber: 15\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: ()=>setActiveTab(\"search\"),\n                            className: \"flex flex-col items-center space-y-1 p-2 transition-colors \".concat(activeTab === \"search\" ? \"text-purple-400\" : isDarkMode ? \"text-gray-400\" : \"text-gray-600\"),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Home_Search_Settings_lucide_react__WEBPACK_IMPORTED_MODULE_20__[\"default\"], {\n                                    size: 24\n                                }, void 0, false, {\n                                    fileName: \"/home/project/app/page.tsx\",\n                                    lineNumber: 797,\n                                    columnNumber: 17\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-xs\",\n                                    children: \"Search\"\n                                }, void 0, false, {\n                                    fileName: \"/home/project/app/page.tsx\",\n                                    lineNumber: 798,\n                                    columnNumber: 17\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/project/app/page.tsx\",\n                            lineNumber: 791,\n                            columnNumber: 15\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: ()=>setActiveTab(\"settings\"),\n                            className: \"flex flex-col items-center space-y-1 p-2 transition-colors \".concat(activeTab === \"settings\" ? \"text-purple-400\" : isDarkMode ? \"text-gray-400\" : \"text-gray-600\"),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Home_Search_Settings_lucide_react__WEBPACK_IMPORTED_MODULE_21__[\"default\"], {\n                                    size: 24\n                                }, void 0, false, {\n                                    fileName: \"/home/project/app/page.tsx\",\n                                    lineNumber: 806,\n                                    columnNumber: 17\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"text-xs\",\n                                    children: \"Settings\"\n                                }, void 0, false, {\n                                    fileName: \"/home/project/app/page.tsx\",\n                                    lineNumber: 807,\n                                    columnNumber: 17\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/project/app/page.tsx\",\n                            lineNumber: 800,\n                            columnNumber: 15\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/project/app/page.tsx\",\n                    lineNumber: 781,\n                    columnNumber: 13\n                }, this)\n            }, void 0, false, {\n                fileName: \"/home/project/app/page.tsx\",\n                lineNumber: 780,\n                columnNumber: 11\n            }, this),\n            currentSong && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                children: !isPlayerMaximized ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_MinimizedPlayer__WEBPACK_IMPORTED_MODULE_7__[\"default\"], {\n                    song: currentSong,\n                    isPlaying: isPlaying,\n                    imageUrl: imageUrls[currentSong.img_id],\n                    onTogglePlay: togglePlay,\n                    onMaximize: togglePlayerSize,\n                    onPrevious: handlePrevious,\n                    onNext: handleNext,\n                    onClose: closePlayer,\n                    onToggleLike: ()=>handleToggleLike(currentSong.id),\n                    formatNumber: formatNumber,\n                    currentTime: currentTime,\n                    duration: duration\n                }, void 0, false, {\n                    fileName: \"/home/project/app/page.tsx\",\n                    lineNumber: 817,\n                    columnNumber: 15\n                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_MaximizedPlayer__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                    song: currentSong,\n                    isPlaying: isPlaying,\n                    imageUrl: imageUrls[currentSong.img_id],\n                    onTogglePlay: togglePlay,\n                    onMinimize: togglePlayerSize,\n                    onPrevious: handlePrevious,\n                    onNext: handleNext,\n                    onToggleLike: ()=>handleToggleLike(currentSong.id),\n                    formatNumber: formatNumber,\n                    onAddToPlaylist: ()=>handleAddToPlaylist(currentSong),\n                    currentTime: currentTime,\n                    duration: duration,\n                    setCurrentTime: (seekTime)=>{\n                        if (audioRef.current && !isNaN(audioRef.current.duration)) {\n                            setIsExternallySeeking(true);\n                            audioRef.current.currentTime = seekTime;\n                            setCurrentTimeState(seekTime);\n                            setTimeout(()=>setIsExternallySeeking(false), 200);\n                        } else {\n                            setPendingSeekTime(seekTime); // Will apply onLoadedMetadata\n                        }\n                    },\n                    volume: volume,\n                    setVolume: setVolume,\n                    isSeeking: isSeeking,\n                    setIsSeeking: setIsSeeking,\n                    queue: queue,\n                    onRemoveFromQueue: removeFromQueue,\n                    onSongPlay: handleSongPlay,\n                    imageUrls: imageUrls,\n                    isShuffleEnabled: isShuffleEnabled,\n                    setIsShuffleEnabled: setIsShuffleEnabled,\n                    repeatMode: repeatMode,\n                    setRepeatMode: setRepeatMode,\n                    sleepTimer: sleepTimer,\n                    remainingTime: remainingTime,\n                    onOpenSleepTimer: ()=>setShowSleepTimerModal(true)\n                }, void 0, false, {\n                    fileName: \"/home/project/app/page.tsx\",\n                    lineNumber: 832,\n                    columnNumber: 15\n                }, this)\n            }, void 0, false),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_CreatePlaylistModal__WEBPACK_IMPORTED_MODULE_9__[\"default\"], {\n                isOpen: showCreatePlaylistModal,\n                onClose: ()=>setShowCreatePlaylistModal(false),\n                onCreatePlaylist: createPlaylist\n            }, void 0, false, {\n                fileName: \"/home/project/app/page.tsx\",\n                lineNumber: 880,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_AddToPlaylistModal__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n                isOpen: showAddToPlaylistModal,\n                onClose: ()=>{\n                    setShowAddToPlaylistModal(false);\n                    setSelectedSongForPlaylist(null);\n                },\n                song: selectedSongForPlaylist,\n                playlists: playlists,\n                onAddToPlaylist: addSongToPlaylist,\n                onCreatePlaylist: ()=>{\n                    setShowAddToPlaylistModal(false);\n                    setShowCreatePlaylistModal(true);\n                },\n                imageUrls: imageUrls,\n                setImageUrls: setImageUrls\n            }, void 0, false, {\n                fileName: \"/home/project/app/page.tsx\",\n                lineNumber: 886,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_SleepTimerModal__WEBPACK_IMPORTED_MODULE_12__[\"default\"], {\n                isOpen: showSleepTimerModal,\n                onClose: ()=>setShowSleepTimerModal(false),\n                onSetTimer: handleSleepTimerSet,\n                currentTimer: sleepTimer\n            }, void 0, false, {\n                fileName: \"/home/project/app/page.tsx\",\n                lineNumber: 903,\n                columnNumber: 9\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"audio\", {\n                ref: audioRef,\n                src: audioUrl !== null && audioUrl !== void 0 ? audioUrl : undefined,\n                onEnded: handleSongEnd,\n                onTimeUpdate: ()=>{\n                    if (audioRef.current && !isSeeking && !isExternallySeeking) {\n                        const current = audioRef.current.currentTime;\n                        // Only update state if the difference is significant\n                        if (Math.abs(currentTime - current) > 0.25) {\n                            setCurrentTime(current);\n                        }\n                    }\n                },\n                onLoadedMetadata: handleLoadedMetadata,\n                onVolumeChange: ()=>{\n                    if (audioRef.current) {\n                        setVolume(audioRef.current.volume);\n                    }\n                },\n                style: {\n                    display: \"none\"\n                }\n            }, void 0, false, {\n                fileName: \"/home/project/app/page.tsx\",\n                lineNumber: 909,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/project/app/page.tsx\",\n        lineNumber: 772,\n        columnNumber: 7\n    }, this);\n}\n_s(MusicPlayerContent, \"ulvuDtmfZxLNrP7yqfK3rao0ylQ=\", false, function() {\n    return [\n        _hooks_useAuth__WEBPACK_IMPORTED_MODULE_13__.useAuth,\n        _hooks_useSupabaseData__WEBPACK_IMPORTED_MODULE_14__.useSupabaseData,\n        _hooks_useQueue__WEBPACK_IMPORTED_MODULE_15__.useQueue,\n        _components_ThemeContext__WEBPACK_IMPORTED_MODULE_17__.useTheme,\n        _hooks_useSleepTimer__WEBPACK_IMPORTED_MODULE_16__.useSleepTimer\n    ];\n});\n_c = MusicPlayerContent;\nfunction MusicPlayerApp() {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_AuthWrapper__WEBPACK_IMPORTED_MODULE_11__[\"default\"], {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_hot_toast__WEBPACK_IMPORTED_MODULE_18__.Toaster, {\n                position: \"bottom-center\"\n            }, void 0, false, {\n                fileName: \"/home/project/app/page.tsx\",\n                lineNumber: 940,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(MusicPlayerContent, {}, void 0, false, {\n                fileName: \"/home/project/app/page.tsx\",\n                lineNumber: 941,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/home/project/app/page.tsx\",\n        lineNumber: 939,\n        columnNumber: 5\n    }, this);\n}\n_c1 = MusicPlayerApp;\nvar _c, _c1;\n$RefreshReg$(_c, \"MusicPlayerContent\");\n$RefreshReg$(_c1, \"MusicPlayerApp\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SXJLLFNBQVNrRCxPQUFPLElBQUksQ0FBQzNDLGFBQWEsQ0FBQ0kscUJBQXFCO3dCQUMxRCxNQUFNdUMsVUFBVWxELFNBQVNrRCxPQUFPLENBQUNqRCxXQUFXO3dCQUM1QyxxREFBcUQ7d0JBQ3JELElBQUlxSyxLQUFLQyxHQUFHLENBQUN0SyxjQUFjaUQsV0FBVyxNQUFNOzRCQUMxQ2hELGVBQWVnRDt3QkFDakI7b0JBQ0Y7Z0JBQ0Y7Z0JBR0VzSCxrQkFBa0IzRDtnQkFDbEI0RCxnQkFBZ0I7b0JBQ2QsSUFBSXpLLFNBQVNrRCxPQUFPLEVBQUU7d0JBQ3BCNUMsVUFBVU4sU0FBU2tELE9BQU8sQ0FBQzdDLE1BQU07b0JBQ25DO2dCQUNGO2dCQUNBcUssT0FBTztvQkFBRUMsU0FBUztnQkFBTzs7Ozs7Ozs7Ozs7O0FBS25DO0dBOTRCU2hPOztRQUNVUCxvREFBT0E7UUFpQnBCQyxvRUFBZUE7UUFTZkMsc0RBQVFBO1FBYXdCRSwrREFBUUE7UUFtQ3hDRCxnRUFBYUE7OztLQTNFVkk7QUFnNUJNLFNBQVNpTztJQUN0QixxQkFDRSw4REFBQzFPLGdFQUFXQTs7MEJBQ1YsOERBQUNPLHFEQUFPQTtnQkFBQ29PLFVBQVM7Ozs7OzswQkFDbEIsOERBQUNsTzs7Ozs7Ozs7Ozs7QUFHUDtNQVB3QmlPIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2FwcC9wYWdlLnRzeD83NjAzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2UgY2xpZW50J1xuXG5pbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIGNyZWF0ZUNvbnRleHQsIHVzZUNvbnRleHQsIHVzZUVmZmVjdCx1c2VSZWYgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBIb21lIGFzIEhvbWVJY29uLCBTZWFyY2gsIFNldHRpbmdzIH0gZnJvbSAnbHVjaWRlLXJlYWN0JztcbmltcG9ydCBIb21lUGFnZSBmcm9tICdAL2NvbXBvbmVudHMvSG9tZVBhZ2UnO1xuaW1wb3J0IFNlYXJjaFBhZ2UgZnJvbSAnQC9jb21wb25lbnRzL1NlYXJjaFBhZ2UnO1xuaW1wb3J0IFNldHRpbmdzUGFnZSBmcm9tICdAL2NvbXBvbmVudHMvU2V0dGluZ3NQYWdlJztcbmltcG9ydCBQbGF5bGlzdHNQYWdlIGZyb20gJ0AvY29tcG9uZW50cy9QbGF5bGlzdHNQYWdlJztcbmltcG9ydCBMaWtlZFNvbmdzUGFnZSBmcm9tICdAL2NvbXBvbmVudHMvTGlrZWRTb25nc1BhZ2UnO1xuaW1wb3J0IE1pbmltaXplZFBsYXllciBmcm9tICdAL2NvbXBvbmVudHMvTWluaW1pemVkUGxheWVyJztcbmltcG9ydCBNYXhpbWl6ZWRQbGF5ZXIgZnJvbSAnQC9jb21wb25lbnRzL01heGltaXplZFBsYXllcic7XG5pbXBvcnQgQ3JlYXRlUGxheWxpc3RNb2RhbCBmcm9tICdAL2NvbXBvbmVudHMvQ3JlYXRlUGxheWxpc3RNb2RhbCc7XG5pbXBvcnQgQWRkVG9QbGF5bGlzdE1vZGFsIGZyb20gJ0AvY29tcG9uZW50cy9BZGRUb1BsYXlsaXN0TW9kYWwnO1xuaW1wb3J0IEF1dGhXcmFwcGVyIGZyb20gJ0AvY29tcG9uZW50cy9BdXRoV3JhcHBlcic7XG5pbXBvcnQgU2xlZXBUaW1lck1vZGFsIGZyb20gJ0AvY29tcG9uZW50cy9TbGVlcFRpbWVyTW9kYWwnO1xuaW1wb3J0IHsgdXNlQXV0aCB9IGZyb20gJ0AvaG9va3MvdXNlQXV0aCc7XG5pbXBvcnQgeyB1c2VTdXBhYmFzZURhdGEgfSBmcm9tICdAL2hvb2tzL3VzZVN1cGFiYXNlRGF0YSc7XG5pbXBvcnQgeyB1c2VRdWV1ZSB9IGZyb20gJ0AvaG9va3MvdXNlUXVldWUnO1xuaW1wb3J0IHsgdXNlU2xlZXBUaW1lciB9IGZyb20gJ0AvaG9va3MvdXNlU2xlZXBUaW1lcic7XG5pbXBvcnQgeyBTb25nIH0gZnJvbSAnQC90eXBlcyc7XG5pbXBvcnQgeyB1c2VUaGVtZSB9IGZyb20gJ0AvY29tcG9uZW50cy9UaGVtZUNvbnRleHQnO1xuaW1wb3J0IHtUb2FzdGVyLHRvYXN0fSBmcm9tICdyZWFjdC1ob3QtdG9hc3QnO1xuXG5cbmZ1bmN0aW9uIE11c2ljUGxheWVyQ29udGVudCgpIHtcbiAgY29uc3QgeyB1c2VyIH0gPSB1c2VBdXRoKCk7XG4gIGNvbnN0IHtcbiAgICBzb25ncyxcbiAgICBwbGF5bGlzdHMsXG4gICAgbGlrZWRTb25ncyxcbiAgICBsYXN0UGxheWVkU29uZyxcbiAgICBsb2FkaW5nLFxuICAgIHRvZ2dsZUxpa2UsXG4gICAgY3JlYXRlUGxheWxpc3QsXG4gICAgZGVsZXRlUGxheWxpc3QsXG4gICAgcmVuYW1lUGxheWxpc3QsXG4gICAgYWRkU29uZ1RvUGxheWxpc3QsXG4gICAgcmVtb3ZlU29uZ0Zyb21QbGF5bGlzdCxcbiAgICByZWNvcmRMaXN0ZW5pbmdIaXN0b3J5LFxuICAgIHN0b3BDdXJyZW50U29uZ1RyYWNraW5nLFxuICAgIGdldFBlcnNvbmFsaXplZFNvbmdzLFxuICAgIGdldFNtYXJ0UGVyc29uYWxpemVkU29uZ3NcbiAgfSA9IHVzZVN1cGFiYXNlRGF0YSh1c2VyKTtcbiAgXG4gIGNvbnN0IHtcbiAgICBxdWV1ZSxcbiAgICBhZGRUb1F1ZXVlLFxuICAgIHJlbW92ZUZyb21RdWV1ZSxcbiAgICBnZXROZXh0U29uZ0Zyb21RdWV1ZSxcbiAgICBjbGVhclF1ZXVlLFxuICAgIGhhc1F1ZXVlXG4gIH0gPSB1c2VRdWV1ZSgpO1xuXG4gIGNvbnN0IFthY3RpdmVUYWIsIHNldEFjdGl2ZVRhYl0gPSB1c2VTdGF0ZTwnaG9tZScgfCAnc2VhcmNoJyB8ICdzZXR0aW5ncyc+KCdob21lJyk7XG4gIGNvbnN0IFtjdXJyZW50UGFnZSwgc2V0Q3VycmVudFBhZ2VdID0gdXNlU3RhdGU8J21haW4nIHwgJ3BsYXlsaXN0cycgfCAnbGlrZWQnPignbWFpbicpO1xuICBjb25zdCBbY3VycmVudFNvbmcsIHNldEN1cnJlbnRTb25nXSA9IHVzZVN0YXRlPFNvbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2lzUGxheWluZywgc2V0SXNQbGF5aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2lzUGxheWVyTWF4aW1pemVkLCBzZXRJc1BsYXllck1heGltaXplZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaG93Q3JlYXRlUGxheWxpc3RNb2RhbCwgc2V0U2hvd0NyZWF0ZVBsYXlsaXN0TW9kYWxdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvd0FkZFRvUGxheWxpc3RNb2RhbCwgc2V0U2hvd0FkZFRvUGxheWxpc3RNb2RhbF0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtzaG93U2xlZXBUaW1lck1vZGFsLCBzZXRTaG93U2xlZXBUaW1lck1vZGFsXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW3NlbGVjdGVkU29uZ0ZvclBsYXlsaXN0LCBzZXRTZWxlY3RlZFNvbmdGb3JQbGF5bGlzdF0gPSB1c2VTdGF0ZTxTb25nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtoYXNTZXRMYXN0UGxheWVkU29uZywgc2V0SGFzU2V0TGFzdFBsYXllZFNvbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbbGFzdFBsYXllZFNvbmdEaXNtaXNzZWQsIHNldExhc3RQbGF5ZWRTb25nRGlzbWlzc2VkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgeyBpc0RhcmtNb2RlLCB0b2dnbGVUaGVtZSB9ID0gdXNlVGhlbWUoKTtcbiAgY29uc3QgW2Rpc3BsYXlDb3VudCwgc2V0RGlzcGxheUNvdW50XSA9IHVzZVN0YXRlKDE1KTtcbiAgY29uc3QgW2ltYWdlVXJscywgc2V0SW1hZ2VVcmxzXSA9IHVzZVN0YXRlPFJlY29yZDxzdHJpbmcsIHN0cmluZz4+KHt9KTtcbiAgY29uc3QgW2F1ZGlvVXJsLCBzZXRBdWRpb1VybF0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgY29uc3QgYXVkaW9SZWYgPSB1c2VSZWY8SFRNTEF1ZGlvRWxlbWVudCB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbY3VycmVudFRpbWUsIHNldEN1cnJlbnRUaW1lXSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBbZHVyYXRpb24sIHNldER1cmF0aW9uXSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBbdm9sdW1lLCBzZXRWb2x1bWVdID0gdXNlU3RhdGUoMC43NSk7IC8vIGRlZmF1bHQgNzUlXG4gIGNvbnN0IFtpc1NlZWtpbmcsIHNldElzU2Vla2luZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtwZW5kaW5nU2Vla1RpbWUsIHNldFBlbmRpbmdTZWVrVGltZV0gPSB1c2VTdGF0ZTxudW1iZXIgfCBudWxsPihudWxsKTtcbiAgY29uc3QgW2lzRXh0ZXJuYWxseVNlZWtpbmcsIHNldElzRXh0ZXJuYWxseVNlZWtpbmddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbcmVjb21tZW5kZWRRdWV1ZSwgc2V0UmVjb21tZW5kZWRRdWV1ZV0gPSB1c2VTdGF0ZTxTb25nW10+KFtdKVxuICBjb25zdCBbcGxheWVkU29uZ3MsIHNldFBsYXllZFNvbmdzXSA9IHVzZVN0YXRlPFNldDxzdHJpbmc+PihuZXcgU2V0KCkpICBcbiAgY29uc3QgW3BlcnNvbmFsaXplZExpc3QsIHNldFBlcnNvbmFsaXplZExpc3RdID0gdXNlU3RhdGU8U29uZ1tdPihbXSk7XG4gIGNvbnN0IFtjdXJyZW50U29uZ0luZGV4LCBzZXRDdXJyZW50U29uZ0luZGV4XSA9IHVzZVN0YXRlPG51bWJlcj4oMCk7XG4gIGNvbnN0IFtsaXN0ZW5lZFNvbmdzLCBzZXRMaXN0ZW5lZFNvbmdzXSA9IHVzZVN0YXRlPFNldDxzdHJpbmc+PihuZXcgU2V0KCkpO1xuICBjb25zdCBbaXNGZXRjaGluZ01vcmUsIHNldElzRmV0Y2hpbmdNb3JlXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgXG4gIC8vIFNtYXJ0IHJlY29tbWVuZGF0aW9uIHN5c3RlbSBzdGF0ZVxuICBjb25zdCBbY3VycmVudEJhdGNoTGlzdGVuZWRTb25ncywgc2V0Q3VycmVudEJhdGNoTGlzdGVuZWRTb25nc10gPSB1c2VTdGF0ZTxTb25nW10+KFtdKTtcbiAgY29uc3QgW3NvbmdTdGFydFRpbWUsIHNldFNvbmdTdGFydFRpbWVdID0gdXNlU3RhdGU8RGF0ZSB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbYmF0Y2hTdGFydEluZGV4LCBzZXRCYXRjaFN0YXJ0SW5kZXhdID0gdXNlU3RhdGUoMCk7XG4gIFxuICAvLyBTaHVmZmxlIGFuZCByZXBlYXQgc3RhdGVcbiAgY29uc3QgW2lzU2h1ZmZsZUVuYWJsZWQsIHNldElzU2h1ZmZsZUVuYWJsZWRdID0gdXNlU3RhdGUodHJ1ZSk7IC8vIFNodWZmbGUgb24gYnkgZGVmYXVsdFxuICBjb25zdCBbcmVwZWF0TW9kZSwgc2V0UmVwZWF0TW9kZV0gPSB1c2VTdGF0ZTwnb2ZmJyB8ICdvbmNlJyB8ICdpbmZpbml0ZSc+KCdvZmYnKTtcblxuICAvLyBTbGVlcCB0aW1lclxuICBjb25zdCB7IFxuICAgIHNsZWVwVGltZXIsIFxuICAgIHJlbWFpbmluZ1RpbWUsIFxuICAgIHN0YXJ0VGltZXIsIFxuICAgIGNhbmNlbFRpbWVyLCBcbiAgICB0cmlnZ2VyQWZ0ZXJTb25nVGltZXIsIFxuICAgIGlzQWN0aXZlOiBpc1NsZWVwVGltZXJBY3RpdmUgXG4gIH0gPSB1c2VTbGVlcFRpbWVyKCk7XG5cbmNvbnN0IGxvYWRNb3JlU29uZ3MgPSAoKSA9PiB7XG4gIHNldERpc3BsYXlDb3VudChwcmV2ID0+IHByZXYgKyAxNSk7XG59O1xuXG5jb25zdCBkaXNwbGF5ZWRTb25ncyA9IHNvbmdzLnNsaWNlKDAsIGRpc3BsYXlDb3VudCk7XG51c2VFZmZlY3QoKCkgPT4ge1xuICBjb25zdCBsb2FkQXVkaW8gPSBhc3luYyAoKSA9PiB7XG4gICAgaWYgKGN1cnJlbnRTb25nPy5maWxlX2lkKSB7XG4gICAgICBjb25zdCB1cmwgPSBgL2FwaS9hdWRpby1wcm94eT9maWxlaWQ9JHtjdXJyZW50U29uZy5maWxlX2lkfWA7XG4gICAgICBzZXRBdWRpb1VybCh1cmwpO1xuXG4gICAgICBzZXREdXJhdGlvbigwKTtcbiAgICAgIHNldEN1cnJlbnRUaW1lKDApO1xuICAgICAgc2V0UGVuZGluZ1NlZWtUaW1lKG51bGwpO1xuICAgIH1cbiAgfTtcblxuICBsb2FkQXVkaW8oKTtcbn0sIFtjdXJyZW50U29uZz8uZmlsZV9pZF0pO1xuXG51c2VFZmZlY3QoKCkgPT4ge1xuICBpZiAoYXVkaW9SZWYuY3VycmVudCkge1xuICAgIGF1ZGlvUmVmLmN1cnJlbnQudm9sdW1lID0gdm9sdW1lO1xuICB9XG59LCBbdm9sdW1lXSk7XG5cbnVzZUVmZmVjdCgoKSA9PiB7XG4gIGNvbnN0IGF1ZGlvID0gYXVkaW9SZWYuY3VycmVudDtcbiAgaWYgKCFhdWRpbykgcmV0dXJuO1xuXG4gIGlmICghaXNOYU4oYXVkaW8uZHVyYXRpb24pICYmIGlzUGxheWluZykge1xuICAgIC8vIER1cmF0aW9uIGlzIHZhbGlkLCBzYWZlIHRvIHBsYXlcbiAgICBhdWRpby5wbGF5KCkuY2F0Y2goKGUpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1BsYXliYWNrIGVycm9yOicsIGUpO1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKCFpc1BsYXlpbmcpIHtcbiAgICBhdWRpby5wYXVzZSgpO1xuICB9XG59LCBbaXNQbGF5aW5nXSk7XG5cblxuXG5cbi8vIExvYWQgaW1hZ2VzIGZvciBjdXJyZW50bHkgZGlzcGxheWVkIHNvbmdzXG51c2VFZmZlY3QoKCkgPT4ge1xuICBjb25zdCBmZXRjaEltYWdlcyA9IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBuZXdVcmxzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG5cbiAgICAvLyBTb25ncyBmcm9tIHRoZSBtYWluIGZlZWRcbiAgICBjb25zdCBzb25nc1RvTG9hZCA9IHNvbmdzLnNsaWNlKDAsIGRpc3BsYXlDb3VudCk7XG4gICAgZm9yIChjb25zdCBzb25nIG9mIHNvbmdzVG9Mb2FkKSB7XG4gICAgICBpZiAoIWltYWdlVXJsc1tzb25nLmlkXSkge1xuICAgICAgICBuZXdVcmxzW3NvbmcuaWRdID0gYC9hcGkvaW1hZ2UtcHJveHk/ZmlsZWlkPSR7c29uZy5pbWdfaWR9YDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTb25ncyBmcm9tIHBsYXlsaXN0c1xuICAgIGZvciAoY29uc3QgcGxheWxpc3Qgb2YgcGxheWxpc3RzKSB7XG4gICAgICBmb3IgKGNvbnN0IHNvbmcgb2YgcGxheWxpc3Quc29uZ3MpIHtcbiAgICAgICAgaWYgKCFpbWFnZVVybHNbc29uZy5pZF0pIHtcbiAgICAgICAgICBuZXdVcmxzW3NvbmcuaWRdID0gYC9hcGkvaW1hZ2UtcHJveHk/ZmlsZWlkPSR7c29uZy5pbWdfaWR9YDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIExpa2VkIHNvbmdzXG4gICAgZm9yIChjb25zdCBzb25nIG9mIGxpa2VkU29uZ3MpIHtcbiAgICAgIGlmICghaW1hZ2VVcmxzW3NvbmcuaWRdKSB7XG4gICAgICAgIG5ld1VybHNbc29uZy5pZF0gPSBgL2FwaS9pbWFnZS1wcm94eT9maWxlaWQ9JHtzb25nLmltZ19pZH1gO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFwcGx5IGlmIG5ldyBVUkxzIGZvdW5kXG4gICAgaWYgKE9iamVjdC5rZXlzKG5ld1VybHMpLmxlbmd0aCA+IDApIHtcbiAgICAgIHNldEltYWdlVXJscyhwcmV2ID0+ICh7IC4uLnByZXYsIC4uLm5ld1VybHMgfSkpO1xuICAgIH1cbiAgfTtcblxuICBmZXRjaEltYWdlcygpO1xufSwgW2Rpc3BsYXlDb3VudCwgc29uZ3MsIHBsYXlsaXN0cywgbGlrZWRTb25nc10pO1xuXG5cbnVzZUVmZmVjdCgoKSA9PiB7XG4gIGNvbnNvbGUubG9nKCfwn461IHBlcnNvbmFsaXplZExpc3QgdXBkYXRlZDonLCBwZXJzb25hbGl6ZWRMaXN0KTtcbn0sIFtwZXJzb25hbGl6ZWRMaXN0XSk7XG5cbiAgLy8gU2V0IGxhc3QgcGxheWVkIHNvbmcgYXMgY3VycmVudCBzb25nIHdoZW4gZGF0YSBsb2FkcyAob25seSBvbmNlIGFuZCBpZiBub3QgZGlzbWlzc2VkKVxudXNlRWZmZWN0KCgpID0+IHtcbiAgY29uc3QgbG9hZExhc3RQbGF5ZWRJbWFnZSA9IGFzeW5jICgpID0+IHtcbiAgICBpZiAodXNlciAmJiBsYXN0UGxheWVkU29uZyAmJiAhaGFzU2V0TGFzdFBsYXllZFNvbmcgJiYgIWxhc3RQbGF5ZWRTb25nRGlzbWlzc2VkKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZygn8J+OtSBMb2FkaW5nIGluaXRpYWwgcGVyc29uYWxpemVkIHNvbmdzIGZvciBsYXN0IHBsYXllZCBzb25nJyk7XG4gICAgICAgIGNvbnN0IGluaXRpYWxSZWNzID0gYXdhaXQgZ2V0UGVyc29uYWxpemVkU29uZ3ModXNlci5pZCwgbGFzdFBsYXllZFNvbmcsIGxpc3RlbmVkU29uZ3MpO1xuICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IGluaXRpYWxSZWNzLmZpbHRlcihzb25nID0+ICFwbGF5ZWRTb25ncy5oYXMoc29uZy5maWxlX2lkLnRvU3RyaW5nKCkpKTtcbiAgICAgICAgY29uc3QgbmV3UGVyc29uYWxpemVkTGlzdCA9IFtsYXN0UGxheWVkU29uZywgLi4uZmlsdGVyZWQuc2xpY2UoMCwgNCldO1xuICAgICAgICBzZXRQZXJzb25hbGl6ZWRMaXN0KG5ld1BlcnNvbmFsaXplZExpc3QpO1xuICAgICAgICBjb25zb2xlLmxvZygn4pyFIEluaXRpYWwgcGVyc29uYWxpemVkIGxpc3Qgc2V0OicsIG5ld1BlcnNvbmFsaXplZExpc3QubGVuZ3RoLCAnc29uZ3MnKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBsb2FkaW5nIGluaXRpYWwgcGVyc29uYWxpemVkIHNvbmdzOicsIGVycm9yKTtcbiAgICAgICAgc2V0UGVyc29uYWxpemVkTGlzdChbbGFzdFBsYXllZFNvbmddKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgc2V0Q3VycmVudFNvbmcobGFzdFBsYXllZFNvbmcpO1xuICAgICAgc2V0SGFzU2V0TGFzdFBsYXllZFNvbmcodHJ1ZSk7XG5cbiAgICAgIC8vIEFkZCB0byBsaXN0ZW5lZCBzb25ncyBhbmQgbG9nXG4gICAgICBzZXRMaXN0ZW5lZFNvbmdzKHByZXYgPT4ge1xuICAgICAgICBjb25zdCBuZXdTZXQgPSBuZXcgU2V0KHByZXYpO1xuICAgICAgICBuZXdTZXQuYWRkKGxhc3RQbGF5ZWRTb25nLmZpbGVfaWQudG9TdHJpbmcoKSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn461IExpc3RlbmVkIFNvbmdzIExpc3Q6JywgQXJyYXkuZnJvbShuZXdTZXQpKTtcbiAgICAgICAgcmV0dXJuIG5ld1NldDtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIWltYWdlVXJsc1tsYXN0UGxheWVkU29uZy5pbWdfaWRdKSB7XG4gICAgICAgIGNvbnN0IHVybCA9IGAvYXBpL2ltYWdlLXByb3h5P2ZpbGVpZD0ke2xhc3RQbGF5ZWRTb25nLmltZ19pZH1gO1xuICAgICAgICBzZXRJbWFnZVVybHMoKHByZXYpID0+ICh7XG4gICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICBbbGFzdFBsYXllZFNvbmcuaW1nX2lkXTogdXJsXG4gICAgICAgIH0pKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgbG9hZExhc3RQbGF5ZWRJbWFnZSgpO1xufSwgW2xhc3RQbGF5ZWRTb25nLCBoYXNTZXRMYXN0UGxheWVkU29uZywgbGFzdFBsYXllZFNvbmdEaXNtaXNzZWQsIHVzZXIsIGdldFBlcnNvbmFsaXplZFNvbmdzXSk7XG5cblxuY29uc3QgaGFuZGxlU29uZ1BsYXkgPSBhc3luYyAoc29uZzogU29uZykgPT4ge1xuICAvLyBSZWNvcmQgaWYgcHJldmlvdXMgc29uZyB3YXMgbGlzdGVuZWQgdG8gKD4yMCBzZWNvbmRzKVxuICBpZiAoY3VycmVudFNvbmcgJiYgc29uZ1N0YXJ0VGltZSkge1xuICAgIGNvbnN0IGxpc3RlbkR1cmF0aW9uID0gKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gc29uZ1N0YXJ0VGltZS5nZXRUaW1lKCkpIC8gMTAwMDtcbiAgICBpZiAobGlzdGVuRHVyYXRpb24gPiAyMCkge1xuICAgICAgY29uc29sZS5sb2coYOKchSBVc2VyIGxpc3RlbmVkIHRvIFwiJHtjdXJyZW50U29uZy5uYW1lfVwiIGZvciAke2xpc3RlbkR1cmF0aW9uLnRvRml4ZWQoMSl9IHNlY29uZHNgKTtcbiAgICAgIHNldEN1cnJlbnRCYXRjaExpc3RlbmVkU29uZ3MocHJldiA9PiB7XG4gICAgICAgIGNvbnN0IGV4aXN0cyA9IHByZXYuc29tZShzID0+IHMuZmlsZV9pZCA9PT0gY3VycmVudFNvbmcuZmlsZV9pZCk7XG4gICAgICAgIGlmICghZXhpc3RzKSB7XG4gICAgICAgICAgY29uc3QgdXBkYXRlZCA9IFsuLi5wcmV2LCBjdXJyZW50U29uZ107XG4gICAgICAgICAgY29uc29sZS5sb2coJ/CfjrUgQ3VycmVudCBiYXRjaCBsaXN0ZW5lZCBzb25nczonLCB1cGRhdGVkLm1hcChzID0+IHMubmFtZSkpO1xuICAgICAgICAgIHJldHVybiB1cGRhdGVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKGDij63vuI8gVXNlciBza2lwcGVkIFwiJHtjdXJyZW50U29uZy5uYW1lfVwiIGFmdGVyICR7bGlzdGVuRHVyYXRpb24udG9GaXhlZCgxKX0gc2Vjb25kc2ApO1xuICAgIH1cbiAgfVxuXG4gIHNldEN1cnJlbnRTb25nKHNvbmcpO1xuICBzZXRJc1BsYXlpbmcodHJ1ZSk7XG4gIHNldExhc3RQbGF5ZWRTb25nRGlzbWlzc2VkKGZhbHNlKTtcbiAgcmVjb3JkTGlzdGVuaW5nSGlzdG9yeShzb25nLmlkKTtcbiAgc2V0U29uZ1N0YXJ0VGltZShuZXcgRGF0ZSgpKTsgLy8gVHJhY2sgd2hlbiB0aGlzIHNvbmcgc3RhcnRlZFxuXG4gIC8vIEFkZCB0byBsaXN0ZW5lZCBzb25ncyBhbmQgbG9nXG4gIHNldExpc3RlbmVkU29uZ3MocHJldiA9PiB7XG4gICAgY29uc3QgbmV3U2V0ID0gbmV3IFNldChwcmV2KTtcbiAgICBuZXdTZXQuYWRkKHNvbmcuZmlsZV9pZC50b1N0cmluZygpKTtcbiAgICBjb25zb2xlLmxvZygn8J+OtSBMaXN0ZW5lZCBTb25ncyBMaXN0OicsIEFycmF5LmZyb20obmV3U2V0KSk7XG4gICAgcmV0dXJuIG5ld1NldDtcbiAgfSk7XG5cbiAgc2V0UGxheWVkU29uZ3MoKHByZXYpID0+IHtcbiAgICBjb25zdCB1cGRhdGVkID0gbmV3IFNldChwcmV2KTtcbiAgICB1cGRhdGVkLmFkZChzb25nLmZpbGVfaWQudG9TdHJpbmcoKSk7XG4gICAgcmV0dXJuIHVwZGF0ZWQ7XG4gIH0pO1xuXG4gIGlmICh1c2VyKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn461IEZldGNoaW5nIHBlcnNvbmFsaXplZCBzb25ncyBmb3I6Jywgc29uZy5uYW1lKTtcbiAgICAgIGNvbnN0IHJlY3MgPSBhd2FpdCBnZXRQZXJzb25hbGl6ZWRTb25ncyh1c2VyLmlkLCBzb25nLCBsaXN0ZW5lZFNvbmdzKTtcbiAgICAgIGNvbnN0IGZpbHRlcmVkID0gcmVjcy5maWx0ZXIocyA9PiAhcGxheWVkU29uZ3MuaGFzKHMuZmlsZV9pZC50b1N0cmluZygpKSk7XG4gICAgICBjb25zdCBuZXdQZXJzb25hbGl6ZWRMaXN0ID0gW3NvbmcsIC4uLmZpbHRlcmVkLnNsaWNlKDAsIDQpXTtcbiAgICAgIHNldFBlcnNvbmFsaXplZExpc3QobmV3UGVyc29uYWxpemVkTGlzdCk7XG4gICAgICBzZXRDdXJyZW50U29uZ0luZGV4KDApO1xuICAgICAgc2V0QmF0Y2hTdGFydEluZGV4KDApO1xuICAgICAgc2V0Q3VycmVudEJhdGNoTGlzdGVuZWRTb25ncyhbXSk7IC8vIFJlc2V0IGJhdGNoIGZvciBuZXcgc29uZyBzZWxlY3Rpb25cbiAgICAgIGNvbnNvbGUubG9nKCfinIUgTmV3IHBlcnNvbmFsaXplZCBsaXN0IHNldDonLCBuZXdQZXJzb25hbGl6ZWRMaXN0Lmxlbmd0aCwgJ3NvbmdzJyk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBFcnJvciBmZXRjaGluZyBwZXJzb25hbGl6ZWQgc29uZ3M6JywgZXJyb3IpO1xuICAgICAgc2V0UGVyc29uYWxpemVkTGlzdChbc29uZ10pO1xuICAgICAgc2V0Q3VycmVudFNvbmdJbmRleCgwKTtcbiAgICAgIHNldEJhdGNoU3RhcnRJbmRleCgwKTtcbiAgICAgIHNldEN1cnJlbnRCYXRjaExpc3RlbmVkU29uZ3MoW10pO1xuICAgIH1cbiAgfVxufTtcblxuXG4gIGNvbnN0IGhhbmRsZUFkZFRvUXVldWUgPSAoc29uZzogU29uZykgPT4ge1xuICBhZGRUb1F1ZXVlKHNvbmcpO1xuICB0b2FzdC5zdWNjZXNzKGBBZGRlZCBcIiR7c29uZy5uYW1lfVwiIHRvIHF1ZXVlYCk7XG59O1xuXG4gIGNvbnN0IHRvZ2dsZVBsYXkgPSAoKSA9PiB7XG4gICAgc2V0SXNQbGF5aW5nKCFpc1BsYXlpbmcpO1xuICB9O1xuXG4gIGNvbnN0IHRvZ2dsZVBsYXllclNpemUgPSAoKSA9PiB7XG4gICAgc2V0SXNQbGF5ZXJNYXhpbWl6ZWQoIWlzUGxheWVyTWF4aW1pemVkKTtcbiAgfTtcblxuICBjb25zdCBjbG9zZVBsYXllciA9IGFzeW5jICgpID0+IHtcbiAgICAvLyBTdG9wIHRyYWNraW5nIGN1cnJlbnQgc29uZyBiZWZvcmUgY2xvc2luZ1xuICAgIGF3YWl0IHN0b3BDdXJyZW50U29uZ1RyYWNraW5nKCk7XG4gICAgc2V0Q3VycmVudFNvbmcobnVsbCk7XG4gICAgc2V0SXNQbGF5aW5nKGZhbHNlKTtcbiAgICBzZXRJc1BsYXllck1heGltaXplZChmYWxzZSk7XG4gICAgXG4gICAgLy8gTWFyayBsYXN0IHBsYXllZCBzb25nIGFzIGRpc21pc3NlZCBzbyBpdCB3b24ndCBhdXRvLWxvYWQgYWdhaW5cbiAgICBzZXRMYXN0UGxheWVkU29uZ0Rpc21pc3NlZCh0cnVlKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVUb2dnbGVMaWtlID0gKHNvbmdJZDogc3RyaW5nKSA9PiB7XG4gICAgdG9nZ2xlTGlrZShzb25nSWQpO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBjdXJyZW50IHNvbmcgc3RhdGUgaWYgaXQncyB0aGUgb25lIGJlaW5nIGxpa2VkL3VubGlrZWRcbiAgICBpZiAoY3VycmVudFNvbmcgJiYgY3VycmVudFNvbmcuaWQgPT09IHNvbmdJZCkge1xuICAgICAgc2V0Q3VycmVudFNvbmcocHJldiA9PiBwcmV2ID8geyAuLi5wcmV2LCBpc0xpa2VkOiAhcHJldi5pc0xpa2VkIH0gOiBudWxsKTtcbiAgICB9XG4gIH07XG5cbmNvbnN0IGhhbmRsZVByZXZpb3VzID0gKCkgPT4ge1xuICAvLyBSZWNvcmQgaWYgY3VycmVudCBzb25nIHdhcyBsaXN0ZW5lZCB0byBiZWZvcmUgZ29pbmcgdG8gcHJldmlvdXNcbiAgaWYgKGN1cnJlbnRTb25nICYmIHNvbmdTdGFydFRpbWUpIHtcbiAgICBjb25zdCBsaXN0ZW5EdXJhdGlvbiA9IChuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHNvbmdTdGFydFRpbWUuZ2V0VGltZSgpKSAvIDEwMDA7XG4gICAgaWYgKGxpc3RlbkR1cmF0aW9uID4gMjApIHtcbiAgICAgIGNvbnNvbGUubG9nKGDinIUgVXNlciBsaXN0ZW5lZCB0byBcIiR7Y3VycmVudFNvbmcubmFtZX1cIiBmb3IgJHtsaXN0ZW5EdXJhdGlvbi50b0ZpeGVkKDEpfSBzZWNvbmRzYCk7XG4gICAgICBzZXRDdXJyZW50QmF0Y2hMaXN0ZW5lZFNvbmdzKHByZXYgPT4ge1xuICAgICAgICBjb25zdCBleGlzdHMgPSBwcmV2LnNvbWUocyA9PiBzLmZpbGVfaWQgPT09IGN1cnJlbnRTb25nLmZpbGVfaWQpO1xuICAgICAgICBpZiAoIWV4aXN0cykge1xuICAgICAgICAgIGNvbnN0IHVwZGF0ZWQgPSBbLi4ucHJldiwgY3VycmVudFNvbmddO1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn461IEN1cnJlbnQgYmF0Y2ggbGlzdGVuZWQgc29uZ3M6JywgdXBkYXRlZC5tYXAocyA9PiBzLm5hbWUpKTtcbiAgICAgICAgICByZXR1cm4gdXBkYXRlZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGlmICghY3VycmVudFNvbmcpIHJldHVybjtcblxuICAvLyBDaGVjayBpZiB0aGVyZSdzIGEgcHJldmlvdXMgc29uZyBpbiB0aGUgcGVyc29uYWxpemVkIGxpc3RcbiAgaWYgKGN1cnJlbnRTb25nSW5kZXggPiAwKSB7XG4gICAgY29uc3QgcHJldkluZGV4ID0gY3VycmVudFNvbmdJbmRleCAtIDE7XG4gICAgY29uc3QgcHJldlNvbmcgPSBwZXJzb25hbGl6ZWRMaXN0W3ByZXZJbmRleF07XG4gICAgXG4gICAgaWYgKHByZXZTb25nKSB7XG4gICAgICBzZXRDdXJyZW50U29uZyhwcmV2U29uZyk7XG4gICAgICBzZXRDdXJyZW50U29uZ0luZGV4KHByZXZJbmRleCk7XG4gICAgICBzZXRJc1BsYXlpbmcodHJ1ZSk7XG4gICAgICBzZXRMYXN0UGxheWVkU29uZ0Rpc21pc3NlZChmYWxzZSk7XG4gICAgICByZWNvcmRMaXN0ZW5pbmdIaXN0b3J5KHByZXZTb25nLmlkKTtcbiAgICAgIHNldFNvbmdTdGFydFRpbWUobmV3IERhdGUoKSk7XG5cbiAgICAgIC8vIEFkZCB0byBsaXN0ZW5lZCBzb25ncyBhbmQgbG9nXG4gICAgICBzZXRMaXN0ZW5lZFNvbmdzKHByZXYgPT4ge1xuICAgICAgICBjb25zdCBuZXdTZXQgPSBuZXcgU2V0KHByZXYpO1xuICAgICAgICBuZXdTZXQuYWRkKHByZXZTb25nLmZpbGVfaWQudG9TdHJpbmcoKSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn461IExpc3RlbmVkIFNvbmdzIExpc3Q6JywgQXJyYXkuZnJvbShuZXdTZXQpKTtcbiAgICAgICAgcmV0dXJuIG5ld1NldDtcbiAgICAgIH0pO1xuXG4gICAgICBzZXRQbGF5ZWRTb25ncygocHJldikgPT4ge1xuICAgICAgICBjb25zdCB1cGRhdGVkID0gbmV3IFNldChwcmV2KTtcbiAgICAgICAgdXBkYXRlZC5hZGQocHJldlNvbmcuZmlsZV9pZC50b1N0cmluZygpKTtcbiAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7XG4gICAgICB9KTtcblxuICAgICAgLy8gUHJlbG9hZCBpbWFnZVxuICAgICAgaWYgKCFpbWFnZVVybHNbcHJldlNvbmcuaW1nX2lkXSkge1xuICAgICAgICBjb25zdCBuZXdVcmwgPSBgL2FwaS9pbWFnZS1wcm94eT9maWxlaWQ9JHtwcmV2U29uZy5pbWdfaWR9YDtcbiAgICAgICAgc2V0SW1hZ2VVcmxzKHByZXYgPT4gKHsgLi4ucHJldiwgW3ByZXZTb25nLmltZ19pZF06IG5ld1VybCB9KSk7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIElmIGF0IHRoZSBiZWdpbm5pbmcsIGp1c3QgcmVzdGFydCBjdXJyZW50IHNvbmdcbiAgICBzZXRDdXJyZW50VGltZSgwKTtcbiAgICBzZXRJc1BsYXlpbmcodHJ1ZSk7XG4gIH1cbn07XG5cbnVzZUVmZmVjdCgoKSA9PiB7XG4gIGlmICghY3VycmVudFNvbmcpIHJldHVybjtcblxuICBjb25zdCBjdXJyZW50SW5kZXggPSBzb25ncy5maW5kSW5kZXgoc29uZyA9PiBzb25nLmlkID09PSBjdXJyZW50U29uZy5pZCk7XG4gIGNvbnN0IG5leHRJbmRleCA9IGN1cnJlbnRJbmRleCA8IHNvbmdzLmxlbmd0aCAtIDEgPyBjdXJyZW50SW5kZXggKyAxIDogMDtcbiAgY29uc3QgbmV4dFNvbmcgPSBzb25nc1tuZXh0SW5kZXhdO1xuXG4gIC8vIFByZWxvYWQgbmV4dCBzb25nIGltYWdlIGlmIG5vdCBpbiBjYWNoZVxuICBpZiAobmV4dFNvbmcgJiYgIWltYWdlVXJsc1tuZXh0U29uZy5pbWdfaWRdKSB7XG4gICAgY29uc3QgbmV3VXJsID0gYC9hcGkvaW1hZ2UtcHJveHk/ZmlsZWlkPSR7bmV4dFNvbmcuaW1nX2lkfWA7XG4gICAgc2V0SW1hZ2VVcmxzKHByZXYgPT4gKHsgLi4ucHJldiwgW25leHRTb25nLmltZ19pZF06IG5ld1VybCB9KSk7XG4gIH1cbn0sIFtjdXJyZW50U29uZywgc29uZ3NdKTtcblxuY29uc3QgaGFuZGxlTG9hZGVkTWV0YWRhdGEgPSBhc3luYyAoKSA9PiB7XG4gIGNvbnN0IGF1ZGlvID0gYXVkaW9SZWYuY3VycmVudDtcbiAgaWYgKCFhdWRpbykgcmV0dXJuO1xuXG4gIGNvbnN0IGxvYWRlZER1cmF0aW9uID0gYXVkaW8uZHVyYXRpb247XG5cbiAgaWYgKCFpc05hTihsb2FkZWREdXJhdGlvbikgJiYgaXNGaW5pdGUobG9hZGVkRHVyYXRpb24pKSB7XG4gICAgc2V0RHVyYXRpb24obG9hZGVkRHVyYXRpb24pO1xuXG4gICAgaWYgKHBlbmRpbmdTZWVrVGltZSAhPT0gbnVsbCkge1xuICAgICAgYXVkaW8uY3VycmVudFRpbWUgPSBwZW5kaW5nU2Vla1RpbWU7XG4gICAgICBzZXRDdXJyZW50VGltZShwZW5kaW5nU2Vla1RpbWUpO1xuICAgICAgc2V0UGVuZGluZ1NlZWtUaW1lKG51bGwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRDdXJyZW50VGltZShhdWRpby5jdXJyZW50VGltZSk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGlmIChpc1BsYXlpbmcpIHtcbiAgICAgICAgYXdhaXQgYXVkaW8ucGxheSgpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignQXV0by1wbGF5IGVycm9yIGFmdGVyIG1ldGFkYXRhIGxvYWQ6JywgZXJyKTtcbiAgICB9XG5cbiAgfSBlbHNlIHtcbiAgICAvLyBSZXRyeSBtZXRhZGF0YSByZWFkXG4gICAgc2V0VGltZW91dChoYW5kbGVMb2FkZWRNZXRhZGF0YSwgMTAwKTtcbiAgfVxufTtcblxuXG5cbmNvbnN0IGhhbmRsZU5leHQgPSBhc3luYyAoKSA9PiB7XG4gIC8vIFJlY29yZCBpZiBjdXJyZW50IHNvbmcgd2FzIGxpc3RlbmVkIHRvIGJlZm9yZSBnb2luZyB0byBuZXh0XG4gIGlmIChjdXJyZW50U29uZyAmJiBzb25nU3RhcnRUaW1lKSB7XG4gICAgY29uc3QgbGlzdGVuRHVyYXRpb24gPSAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSBzb25nU3RhcnRUaW1lLmdldFRpbWUoKSkgLyAxMDAwO1xuICAgIGlmIChsaXN0ZW5EdXJhdGlvbiA+IDIwKSB7XG4gICAgICBjb25zb2xlLmxvZyhg4pyFIFVzZXIgbGlzdGVuZWQgdG8gXCIke2N1cnJlbnRTb25nLm5hbWV9XCIgZm9yICR7bGlzdGVuRHVyYXRpb24udG9GaXhlZCgxKX0gc2Vjb25kc2ApO1xuICAgICAgc2V0Q3VycmVudEJhdGNoTGlzdGVuZWRTb25ncyhwcmV2ID0+IHtcbiAgICAgICAgY29uc3QgZXhpc3RzID0gcHJldi5zb21lKHMgPT4gcy5maWxlX2lkID09PSBjdXJyZW50U29uZy5maWxlX2lkKTtcbiAgICAgICAgaWYgKCFleGlzdHMpIHtcbiAgICAgICAgICBjb25zdCB1cGRhdGVkID0gWy4uLnByZXYsIGN1cnJlbnRTb25nXTtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+OtSBDdXJyZW50IGJhdGNoIGxpc3RlbmVkIHNvbmdzOicsIHVwZGF0ZWQubWFwKHMgPT4gcy5uYW1lKSk7XG4gICAgICAgICAgcmV0dXJuIHVwZGF0ZWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coYOKPre+4jyBVc2VyIHNraXBwZWQgXCIke2N1cnJlbnRTb25nLm5hbWV9XCIgYWZ0ZXIgJHtsaXN0ZW5EdXJhdGlvbi50b0ZpeGVkKDEpfSBzZWNvbmRzYCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKCFjdXJyZW50U29uZykgcmV0dXJuO1xuXG4gIC8vIENoZWNrIGlmIHRoZXJlJ3MgYSBzb25nIGluIHRoZSBxdWV1ZSBmaXJzdFxuICBjb25zdCBuZXh0UXVldWVTb25nID0gZ2V0TmV4dFNvbmdGcm9tUXVldWUoKTtcbiAgaWYgKG5leHRRdWV1ZVNvbmcpIHtcbiAgICBzZXRDdXJyZW50U29uZyhuZXh0UXVldWVTb25nKTtcbiAgICBzZXRJc1BsYXlpbmcodHJ1ZSk7XG4gICAgc2V0TGFzdFBsYXllZFNvbmdEaXNtaXNzZWQoZmFsc2UpO1xuICAgIHJlY29yZExpc3RlbmluZ0hpc3RvcnkobmV4dFF1ZXVlU29uZy5pZCk7XG4gICAgc2V0U29uZ1N0YXJ0VGltZShuZXcgRGF0ZSgpKTtcbiAgICBcbiAgICAvLyBBZGQgdG8gbGlzdGVuZWQgc29uZ3MgYW5kIGxvZ1xuICAgIHNldExpc3RlbmVkU29uZ3MocHJldiA9PiB7XG4gICAgICBjb25zdCBuZXdTZXQgPSBuZXcgU2V0KHByZXYpO1xuICAgICAgbmV3U2V0LmFkZChuZXh0UXVldWVTb25nLmZpbGVfaWQudG9TdHJpbmcoKSk7XG4gICAgICBjb25zb2xlLmxvZygn8J+OtSBMaXN0ZW5lZCBTb25ncyBMaXN0OicsIEFycmF5LmZyb20obmV3U2V0KSk7XG4gICAgICByZXR1cm4gbmV3U2V0O1xuICAgIH0pO1xuICAgIFxuICAgIC8vIFVwZGF0ZSBwZXJzb25hbGl6ZWQgbGlzdCB3aXRoIHRoZSBxdWV1ZSBzb25nXG4gICAgaWYgKHVzZXIpIHtcbiAgICAgIGNvbnN0IHJlY3MgPSBhd2FpdCBnZXRQZXJzb25hbGl6ZWRTb25ncyh1c2VyLmlkLCBuZXh0UXVldWVTb25nLCBsaXN0ZW5lZFNvbmdzKTtcbiAgICAgIGNvbnN0IGZpbHRlcmVkID0gcmVjcy5maWx0ZXIocyA9PiAhcGxheWVkU29uZ3MuaGFzKHMuZmlsZV9pZCkpO1xuICAgICAgY29uc3QgbmV3UGVyc29uYWxpemVkTGlzdCA9IFtuZXh0UXVldWVTb25nLCAuLi5maWx0ZXJlZC5zbGljZSgwLCA0KV07XG4gICAgICBzZXRQZXJzb25hbGl6ZWRMaXN0KG5ld1BlcnNvbmFsaXplZExpc3QpO1xuICAgICAgc2V0Q3VycmVudFNvbmdJbmRleCgwKTtcbiAgICB9XG4gICAgXG4gICAgLy8gUHJlbG9hZCBpbWFnZVxuICAgIGlmICghaW1hZ2VVcmxzW25leHRRdWV1ZVNvbmcuaW1nX2lkXSkge1xuICAgICAgY29uc3QgbmV3VXJsID0gYC9hcGkvaW1hZ2UtcHJveHk/ZmlsZWlkPSR7bmV4dFF1ZXVlU29uZy5pbWdfaWR9YDtcbiAgICAgIHNldEltYWdlVXJscyhwcmV2ID0+ICh7IC4uLnByZXYsIFtuZXh0UXVldWVTb25nLmltZ19pZF06IG5ld1VybCB9KSk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIENoZWNrIGlmIHdlJ3JlIGF0IHRoZSBzZWNvbmQtdG8tbGFzdCBzb25nIGFuZCBuZWVkIHRvIGZldGNoIHNtYXJ0IHJlY29tbWVuZGF0aW9uc1xuICBpZiAoY3VycmVudFNvbmdJbmRleCA9PT0gcGVyc29uYWxpemVkTGlzdC5sZW5ndGggLSAyICYmICFpc0ZldGNoaW5nTW9yZSAmJiB1c2VyICYmIGN1cnJlbnRTb25nKSB7XG4gICAgY29uc29sZS5sb2coJ/Cfp6AgQXQgc2Vjb25kLXRvLWxhc3Qgc29uZywgY2hlY2tpbmcgZm9yIHNtYXJ0IHJlY29tbWVuZGF0aW9ucy4uLicpO1xuICAgIHNldElzRmV0Y2hpbmdNb3JlKHRydWUpO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBsZXQgbmV3UmVjczogU29uZ1tdID0gW107XG4gICAgICBcbiAgICAgIC8vIElmIHdlIGhhdmUgc29uZ3MgdGhhdCB1c2VyIGFjdHVhbGx5IGxpc3RlbmVkIHRvIGluIGN1cnJlbnQgYmF0Y2gsIHVzZSBzbWFydCByZWNvbW1lbmRhdGlvbnNcbiAgICAgIGlmIChjdXJyZW50QmF0Y2hMaXN0ZW5lZFNvbmdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc29sZS5sb2coJ/Cfp6AgVXNpbmcgc21hcnQgcmVjb21tZW5kYXRpb25zIGJhc2VkIG9uIGxpc3RlbmVkIHNvbmdzJyk7XG4gICAgICAgIG5ld1JlY3MgPSBhd2FpdCBnZXRTbWFydFBlcnNvbmFsaXplZFNvbmdzKFxuICAgICAgICAgIHVzZXIuaWQsIFxuICAgICAgICAgIGN1cnJlbnRCYXRjaExpc3RlbmVkU29uZ3MsIFxuICAgICAgICAgIG5ldyBTZXQoWy4uLkFycmF5LmZyb20obGlzdGVuZWRTb25ncyksIC4uLnBlcnNvbmFsaXplZExpc3QubWFwKHMgPT4gcy5maWxlX2lkLnRvU3RyaW5nKCkpXSlcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn461IE5vIGxpc3RlbmVkIHNvbmdzIGluIGJhdGNoLCB1c2luZyByZWd1bGFyIHJlY29tbWVuZGF0aW9ucycpO1xuICAgICAgICBuZXdSZWNzID0gYXdhaXQgZ2V0UGVyc29uYWxpemVkU29uZ3ModXNlci5pZCwgY3VycmVudFNvbmcsIGxpc3RlbmVkU29uZ3MpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBmaWx0ZXJlZCA9IG5ld1JlY3MuZmlsdGVyKHNvbmcgPT4gXG4gICAgICAgICFwbGF5ZWRTb25ncy5oYXMoc29uZy5maWxlX2lkLnRvU3RyaW5nKCkpICYmXG4gICAgICAgICFsaXN0ZW5lZFNvbmdzLmhhcyhzb25nLmZpbGVfaWQudG9TdHJpbmcoKSkgJiZcbiAgICAgICAgIXBlcnNvbmFsaXplZExpc3Quc29tZShleGlzdGluZyA9PiBleGlzdGluZy5maWxlX2lkID09PSBzb25nLmZpbGVfaWQpXG4gICAgICApO1xuICAgICAgXG4gICAgICBpZiAoZmlsdGVyZWQubGVuZ3RoID4gMCkge1xuICAgICAgICBzZXRQZXJzb25hbGl6ZWRMaXN0KHByZXYgPT4gWy4uLnByZXYsIC4uLmZpbHRlcmVkLnNsaWNlKDAsIDUpXSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCfinIUgQWRkZWQnLCBmaWx0ZXJlZC5zbGljZSgwLCA1KS5sZW5ndGgsICdzbWFydCByZWNvbW1lbmRhdGlvbnMgdG8gcGVyc29uYWxpemVkIGxpc3QnKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGZldGNoaW5nIHNtYXJ0IHJlY29tbWVuZGF0aW9uczonLCBlcnJvcik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHNldElzRmV0Y2hpbmdNb3JlKGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICAvLyBJZiBubyBxdWV1ZSwgcHJvY2VlZCB3aXRoIHBlcnNvbmFsaXplZCBsaXN0XG4gIGNvbnN0IG5leHRJbmRleCA9IGN1cnJlbnRTb25nSW5kZXggKyAxO1xuXG4gIGlmIChuZXh0SW5kZXggPCBwZXJzb25hbGl6ZWRMaXN0Lmxlbmd0aCkge1xuICAgIGNvbnN0IG5leHRTb25nID0gcGVyc29uYWxpemVkTGlzdFtuZXh0SW5kZXhdO1xuICAgIHNldEN1cnJlbnRTb25nKG5leHRTb25nKTtcbiAgICBzZXRDdXJyZW50U29uZ0luZGV4KG5leHRJbmRleCk7XG4gICAgc2V0SXNQbGF5aW5nKHRydWUpO1xuICAgIHNldExhc3RQbGF5ZWRTb25nRGlzbWlzc2VkKGZhbHNlKTtcbiAgICByZWNvcmRMaXN0ZW5pbmdIaXN0b3J5KG5leHRTb25nLmlkKTtcbiAgICBzZXRTb25nU3RhcnRUaW1lKG5ldyBEYXRlKCkpO1xuXG4gICAgLy8gQWRkIHRvIGxpc3RlbmVkIHNvbmdzIGFuZCBsb2dcbiAgICBzZXRMaXN0ZW5lZFNvbmdzKHByZXYgPT4ge1xuICAgICAgY29uc3QgbmV3U2V0ID0gbmV3IFNldChwcmV2KTtcbiAgICAgIG5ld1NldC5hZGQobmV4dFNvbmcuZmlsZV9pZC50b1N0cmluZygpKTtcbiAgICAgIGNvbnNvbGUubG9nKCfwn461IExpc3RlbmVkIFNvbmdzIExpc3Q6JywgQXJyYXkuZnJvbShuZXdTZXQpKTtcbiAgICAgIHJldHVybiBuZXdTZXQ7XG4gICAgfSk7XG5cbiAgICBzZXRQbGF5ZWRTb25ncygocHJldikgPT4ge1xuICAgICAgY29uc3QgdXBkYXRlZCA9IG5ldyBTZXQocHJldik7XG4gICAgICB1cGRhdGVkLmFkZChTdHJpbmcobmV4dFNvbmcuZmlsZV9pZCkpO1xuICAgICAgcmV0dXJuIHVwZGF0ZWQ7XG4gICAgfSk7XG5cbiAgICAvLyBQcmVsb2FkIGltYWdlXG4gICAgaWYgKCFpbWFnZVVybHNbbmV4dFNvbmcuaW1nX2lkXSkge1xuICAgICAgY29uc3QgbmV3VXJsID0gYC9hcGkvaW1hZ2UtcHJveHk/ZmlsZWlkPSR7bmV4dFNvbmcuaW1nX2lkfWA7XG4gICAgICBzZXRJbWFnZVVybHMocHJldiA9PiAoeyAuLi5wcmV2LCBbbmV4dFNvbmcuaW1nX2lkXTogbmV3VXJsIH0pKTtcbiAgICB9XG5cbiAgfSBlbHNlIHtcbiAgICAvLyBJZiB3ZSd2ZSByZWFjaGVkIHRoZSBlbmQgb2YgcGVyc29uYWxpemVkIGxpc3QsIGdldCBuZXcgc21hcnQgcmVjb21tZW5kYXRpb25zXG4gICAgaWYgKHVzZXIgJiYgY3VycmVudFNvbmcpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCfwn6egIFJlYWNoZWQgZW5kIG9mIGxpc3QsIGZldGNoaW5nIG5ldyBzbWFydCByZWNvbW1lbmRhdGlvbnMnKTtcbiAgICAgICAgXG4gICAgICAgIGxldCBuZXdSZWNzOiBTb25nW10gPSBbXTtcbiAgICAgICAgXG4gICAgICAgIC8vIFVzZSBzbWFydCByZWNvbW1lbmRhdGlvbnMgaWYgd2UgaGF2ZSBsaXN0ZW5lZCBzb25ncyBpbiBjdXJyZW50IGJhdGNoXG4gICAgICAgIGlmIChjdXJyZW50QmF0Y2hMaXN0ZW5lZFNvbmdzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+noCBVc2luZyBzbWFydCByZWNvbW1lbmRhdGlvbnMgZm9yIG5ldyBiYXRjaCcpO1xuICAgICAgICAgIG5ld1JlY3MgPSBhd2FpdCBnZXRTbWFydFBlcnNvbmFsaXplZFNvbmdzKFxuICAgICAgICAgICAgdXNlci5pZCwgXG4gICAgICAgICAgICBjdXJyZW50QmF0Y2hMaXN0ZW5lZFNvbmdzLCBcbiAgICAgICAgICAgIGxpc3RlbmVkU29uZ3NcbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCfwn461IFVzaW5nIHJlZ3VsYXIgcmVjb21tZW5kYXRpb25zIGZvciBuZXcgYmF0Y2gnKTtcbiAgICAgICAgICBuZXdSZWNzID0gYXdhaXQgZ2V0UGVyc29uYWxpemVkU29uZ3ModXNlci5pZCwgY3VycmVudFNvbmcsIGxpc3RlbmVkU29uZ3MpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IG5ld1JlY3MuZmlsdGVyKHNvbmcgPT4gXG4gICAgICAgICAgIXBsYXllZFNvbmdzLmhhcyhzb25nLmZpbGVfaWQudG9TdHJpbmcoKSkgJiZcbiAgICAgICAgICAhbGlzdGVuZWRTb25ncy5oYXMoc29uZy5maWxlX2lkLnRvU3RyaW5nKCkpXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBpZiAoZmlsdGVyZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IG5leHRTb25nID0gZmlsdGVyZWRbMF07XG4gICAgICAgICAgc2V0Q3VycmVudFNvbmcobmV4dFNvbmcpO1xuICAgICAgICAgIHNldElzUGxheWluZyh0cnVlKTtcbiAgICAgICAgICBzZXRMYXN0UGxheWVkU29uZ0Rpc21pc3NlZChmYWxzZSk7XG4gICAgICAgICAgcmVjb3JkTGlzdGVuaW5nSGlzdG9yeShuZXh0U29uZy5pZCk7XG4gICAgICAgICAgc2V0U29uZ1N0YXJ0VGltZShuZXcgRGF0ZSgpKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBBZGQgdG8gbGlzdGVuZWQgc29uZ3MgYW5kIGxvZ1xuICAgICAgICAgIHNldExpc3RlbmVkU29uZ3MocHJldiA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdTZXQgPSBuZXcgU2V0KHByZXYpO1xuICAgICAgICAgICAgbmV3U2V0LmFkZChuZXh0U29uZy5maWxlX2lkLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ/CfjrUgTGlzdGVuZWQgU29uZ3MgTGlzdDonLCBBcnJheS5mcm9tKG5ld1NldCkpO1xuICAgICAgICAgICAgcmV0dXJuIG5ld1NldDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBDcmVhdGUgbmV3IHBlcnNvbmFsaXplZCBsaXN0IHN0YXJ0aW5nIHdpdGggdGhpcyBzb25nXG4gICAgICAgICAgY29uc3QgbmV3UGVyc29uYWxpemVkTGlzdCA9IFtuZXh0U29uZywgLi4uZmlsdGVyZWQuc2xpY2UoMSwgNSldO1xuICAgICAgICAgIHNldFBlcnNvbmFsaXplZExpc3QobmV3UGVyc29uYWxpemVkTGlzdCk7XG4gICAgICAgICAgc2V0Q3VycmVudFNvbmdJbmRleCgwKTtcbiAgICAgICAgICBzZXRCYXRjaFN0YXJ0SW5kZXgoMCk7XG4gICAgICAgICAgc2V0Q3VycmVudEJhdGNoTGlzdGVuZWRTb25ncyhbXSk7IC8vIFJlc2V0IGJhdGNoIGZvciBuZXcgcmVjb21tZW5kYXRpb25zXG4gICAgICAgICAgXG4gICAgICAgICAgc2V0UGxheWVkU29uZ3MoKHByZXYpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWQgPSBuZXcgU2V0KHByZXYpO1xuICAgICAgICAgICAgdXBkYXRlZC5hZGQobmV4dFNvbmcuZmlsZV9pZC50b1N0cmluZygpKTtcbiAgICAgICAgICAgIHJldHVybiB1cGRhdGVkO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIFByZWxvYWQgaW1hZ2VcbiAgICAgICAgICBpZiAoIWltYWdlVXJsc1tuZXh0U29uZy5pbWdfaWRdKSB7XG4gICAgICAgICAgICBjb25zdCBuZXdVcmwgPSBgL2FwaS9pbWFnZS1wcm94eT9maWxlaWQ9JHtuZXh0U29uZy5pbWdfaWR9YDtcbiAgICAgICAgICAgIHNldEltYWdlVXJscyhwcmV2ID0+ICh7IC4uLnByZXYsIFtuZXh0U29uZy5pbWdfaWRdOiBuZXdVcmwgfSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBjb25zb2xlLmxvZygn4pyFIE5ldyBzbWFydCByZWNvbW1lbmRhdGlvbnMgbG9hZGVkOicsIG5ld1BlcnNvbmFsaXplZExpc3QubGVuZ3RoLCAnc29uZ3MnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyBObyBtb3JlIHNtYXJ0IHJlY29tbWVuZGF0aW9ucyBhdmFpbGFibGUnKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcign4p2MIEVycm9yIGZldGNoaW5nIG5ldyBzbWFydCByZWNvbW1lbmRhdGlvbnM6JywgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuXG5cblxuICBjb25zdCBmb3JtYXROdW1iZXIgPSAobnVtOiBudW1iZXIpOiBzdHJpbmcgPT4ge1xuICAgIGlmIChudW0gPj0gMTAwMDAwMCkge1xuICAgICAgcmV0dXJuIChudW0gLyAxMDAwMDAwKS50b0ZpeGVkKDEpICsgJ00nO1xuICAgIH0gZWxzZSBpZiAobnVtID49IDEwMDApIHtcbiAgICAgIHJldHVybiAobnVtIC8gMTAwMCkudG9GaXhlZCgxKSArICdLJztcbiAgICB9XG4gICAgcmV0dXJuIG51bS50b1N0cmluZygpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUFkZFRvUGxheWxpc3QgPSAoc29uZzogU29uZykgPT4ge1xuICAgIHNldFNlbGVjdGVkU29uZ0ZvclBsYXlsaXN0KHNvbmcpO1xuICAgIHNldFNob3dBZGRUb1BsYXlsaXN0TW9kYWwodHJ1ZSk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlU29uZ0VuZCA9IGFzeW5jICgpID0+IHtcbiAgICAvLyBDaGVjayBpZiBzbGVlcCB0aW1lciBpcyBzZXQgdG8gXCJhZnRlci1zb25nXCIgYW5kIHRyaWdnZXIgaXRcbiAgICBpZiAoc2xlZXBUaW1lciA9PT0gJ2FmdGVyLXNvbmcnKSB7XG4gICAgICB0cmlnZ2VyQWZ0ZXJTb25nVGltZXIoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgLy8gUmVjb3JkIGlmIHNvbmcgd2FzIGxpc3RlbmVkIHRvIGNvbXBsZXRlbHkgKGFzc3VtZSA+MjAgc2Vjb25kcyBpZiBpdCBlbmRlZCBuYXR1cmFsbHkpXG4gICAgaWYgKGN1cnJlbnRTb25nICYmIHNvbmdTdGFydFRpbWUpIHtcbiAgICAgIGNvbnN0IGxpc3RlbkR1cmF0aW9uID0gKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gc29uZ1N0YXJ0VGltZS5nZXRUaW1lKCkpIC8gMTAwMDtcbiAgICAgIGNvbnNvbGUubG9nKGDwn461IFNvbmcgXCIke2N1cnJlbnRTb25nLm5hbWV9XCIgZW5kZWQgYWZ0ZXIgJHtsaXN0ZW5EdXJhdGlvbi50b0ZpeGVkKDEpfSBzZWNvbmRzYCk7XG4gICAgICBcbiAgICAgIGlmIChsaXN0ZW5EdXJhdGlvbiA+IDIwKSB7XG4gICAgICAgIHNldEN1cnJlbnRCYXRjaExpc3RlbmVkU29uZ3MocHJldiA9PiB7XG4gICAgICAgICAgY29uc3QgZXhpc3RzID0gcHJldi5zb21lKHMgPT4gcy5maWxlX2lkID09PSBjdXJyZW50U29uZy5maWxlX2lkKTtcbiAgICAgICAgICBpZiAoIWV4aXN0cykge1xuICAgICAgICAgICAgY29uc3QgdXBkYXRlZCA9IFsuLi5wcmV2LCBjdXJyZW50U29uZ107XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn8J+OtSBDdXJyZW50IGJhdGNoIGxpc3RlbmVkIHNvbmdzOicsIHVwZGF0ZWQubWFwKHMgPT4gcy5uYW1lKSk7XG4gICAgICAgICAgICByZXR1cm4gdXBkYXRlZDtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHByZXY7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBIYW5kbGUgcmVwZWF0IG1vZGVzXG4gICAgaWYgKHJlcGVhdE1vZGUgPT09ICdvbmNlJyB8fCByZXBlYXRNb2RlID09PSAnaW5maW5pdGUnKSB7XG4gICAgICAvLyBSZXN0YXJ0IHRoZSBjdXJyZW50IHNvbmdcbiAgICAgIHNldEN1cnJlbnRUaW1lKDApO1xuICAgICAgc2V0SXNQbGF5aW5nKHRydWUpO1xuICAgICAgc2V0U29uZ1N0YXJ0VGltZShuZXcgRGF0ZSgpKTtcbiAgICAgIFxuICAgICAgLy8gSWYgcmVwZWF0IG9uY2UsIHR1cm4gb2ZmIHJlcGVhdCBhZnRlciBwbGF5aW5nIG9uY2VcbiAgICAgIGlmIChyZXBlYXRNb2RlID09PSAnb25jZScpIHtcbiAgICAgICAgc2V0UmVwZWF0TW9kZSgnb2ZmJyk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIFdoZW4gYSBzb25nIGVuZHMsIGF1dG9tYXRpY2FsbHkgcGxheSB0aGUgbmV4dCBvbmVcbiAgICBhd2FpdCBoYW5kbGVOZXh0KCk7XG59O1xuXG4gIGNvbnN0IGhhbmRsZVNsZWVwVGltZXJTZXQgPSAobWludXRlczogbnVtYmVyIHwgJ2FmdGVyLXNvbmcnIHwgbnVsbCkgPT4ge1xuICAgIGlmIChtaW51dGVzID09PSBudWxsKSB7XG4gICAgICBjYW5jZWxUaW1lcigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGFydFRpbWVyKG1pbnV0ZXMsICgpID0+IHtcbiAgICAgICAgc2V0SXNQbGF5aW5nKGZhbHNlKTtcbiAgICAgICAgdG9hc3Quc3VjY2VzcygnU2xlZXAgdGltZXIgZW5kZWQgLSBtdXNpYyBzdG9wcGVkJyk7XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgaWYgKHR5cGVvZiBtaW51dGVzID09PSAnbnVtYmVyJykge1xuICAgICAgICB0b2FzdC5zdWNjZXNzKGBTbGVlcCB0aW1lciBzZXQgZm9yICR7bWludXRlc30gbWludXRlc2ApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdG9hc3Quc3VjY2VzcygnU2xlZXAgdGltZXIgc2V0IHRvIHN0b3AgYWZ0ZXIgY3VycmVudCBzb25nJyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IHJlbmRlckNvbnRlbnQgPSAoKSA9PiB7XG4gICAgaWYgKGN1cnJlbnRQYWdlID09PSAncGxheWxpc3RzJykge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFBsYXlsaXN0c1BhZ2UgXG4gICAgICAgICAgcGxheWxpc3RzPXtwbGF5bGlzdHN9IFxuICAgICAgICAgIG9uQmFjaz17KCkgPT4gc2V0Q3VycmVudFBhZ2UoJ21haW4nKX0gXG4gICAgICAgICAgb25Tb25nUGxheT17aGFuZGxlU29uZ1BsYXl9XG4gICAgICAgICAgb25BZGRUb1F1ZXVlPXtoYW5kbGVBZGRUb1F1ZXVlfVxuICAgICAgICAgIG9uQ3JlYXRlUGxheWxpc3Q9eygpID0+IHNldFNob3dDcmVhdGVQbGF5bGlzdE1vZGFsKHRydWUpfVxuICAgICAgICAgIG9uRGVsZXRlUGxheWxpc3Q9e2RlbGV0ZVBsYXlsaXN0fVxuICAgICAgICAgIG9uUmVuYW1lUGxheWxpc3Q9e3JlbmFtZVBsYXlsaXN0fVxuICAgICAgICAgIG9uUmVtb3ZlU29uZ0Zyb21QbGF5bGlzdD17cmVtb3ZlU29uZ0Zyb21QbGF5bGlzdH1cbiAgICAgICAgICBpbWFnZVVybHM9e2ltYWdlVXJsc31cbiAgICAgICAgLz5cbiAgICAgICk7XG4gICAgfVxuICAgIFxuICAgIGlmIChjdXJyZW50UGFnZSA9PT0gJ2xpa2VkJykge1xuICAgICAgcmV0dXJuIDxMaWtlZFNvbmdzUGFnZSBzb25ncz17bGlrZWRTb25nc30gb25CYWNrPXsoKSA9PiBzZXRDdXJyZW50UGFnZSgnbWFpbicpfSBvblNvbmdQbGF5PXtoYW5kbGVTb25nUGxheX0gb25BZGRUb1F1ZXVlPXtoYW5kbGVBZGRUb1F1ZXVlfSBpbWFnZVVybHM9e2ltYWdlVXJsc30vPjtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGFjdGl2ZVRhYikge1xuICAgICAgY2FzZSAnaG9tZSc6XG4gICAgICAgIHJldHVybiA8SG9tZVBhZ2VcbiAgICAgICAgICAgICAgICBzb25ncz17ZGlzcGxheWVkU29uZ3N9XG4gICAgICAgICAgICAgICAgb25Tb25nUGxheT17aGFuZGxlU29uZ1BsYXl9XG4gICAgICAgICAgICAgICAgZm9ybWF0TnVtYmVyPXtmb3JtYXROdW1iZXJ9XG4gICAgICAgICAgICAgICAgb25BZGRUb1BsYXlsaXN0PXtoYW5kbGVBZGRUb1BsYXlsaXN0fVxuICAgICAgICAgICAgICAgIG9uQWRkVG9RdWV1ZT17aGFuZGxlQWRkVG9RdWV1ZX1cbiAgICAgICAgICAgICAgICBpbWFnZVVybHM9e2ltYWdlVXJsc31cbiAgICAgICAgICAgICAgICBvbkxvYWRNb3JlPXtsb2FkTW9yZVNvbmdzfVxuICAgICAgICAgICAgICAgIGhhc01vcmVTb25ncz17ZGlzcGxheUNvdW50IDwgc29uZ3MubGVuZ3RofVxuICAgICAgICAgICAgICAvPjtcbiAgICAgIGNhc2UgJ3NlYXJjaCc6XG4gICAgICAgIHJldHVybiA8U2VhcmNoUGFnZVxuICAgICAgICAgICAgICBzb25ncz17c29uZ3N9XG4gICAgICAgICAgICAgIG9uU29uZ1BsYXk9e2hhbmRsZVNvbmdQbGF5fVxuICAgICAgICAgICAgICBmb3JtYXROdW1iZXI9e2Zvcm1hdE51bWJlcn1cbiAgICAgICAgICAgICAgb25BZGRUb1BsYXlsaXN0PXtoYW5kbGVBZGRUb1BsYXlsaXN0fVxuICAgICAgICAgICAgICBvbkFkZFRvUXVldWU9e2hhbmRsZUFkZFRvUXVldWV9XG4gICAgICAgICAgICAgIGltYWdlVXJscz17aW1hZ2VVcmxzfVxuICAgICAgICAgICAgICBzZXRJbWFnZVVybHM9e3NldEltYWdlVXJsc31cbiAgICAgICAgICAgIC8+O1xuICAgICAgY2FzZSAnc2V0dGluZ3MnOlxuICAgICAgICByZXR1cm4gPFNldHRpbmdzUGFnZSBvblBsYXlsaXN0c0NsaWNrPXsoKSA9PiBzZXRDdXJyZW50UGFnZSgncGxheWxpc3RzJyl9IG9uTGlrZWRDbGljaz17KCkgPT4gc2V0Q3VycmVudFBhZ2UoJ2xpa2VkJyl9IC8+O1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIDxIb21lUGFnZVxuICAgICAgICAgICAgICBzb25ncz17ZGlzcGxheWVkU29uZ3N9XG4gICAgICAgICAgICAgIG9uU29uZ1BsYXk9e2hhbmRsZVNvbmdQbGF5fVxuICAgICAgICAgICAgICBmb3JtYXROdW1iZXI9e2Zvcm1hdE51bWJlcn1cbiAgICAgICAgICAgICAgb25BZGRUb1BsYXlsaXN0PXtoYW5kbGVBZGRUb1BsYXlsaXN0fVxuICAgICAgICAgICAgICBvbkFkZFRvUXVldWU9e2hhbmRsZUFkZFRvUXVldWV9XG4gICAgICAgICAgICAgIGltYWdlVXJscz17aW1hZ2VVcmxzfVxuICAgICAgICAgICAgICBvbkxvYWRNb3JlPXtsb2FkTW9yZVNvbmdzfVxuICAgICAgICAgICAgICBoYXNNb3JlU29uZ3M9e2Rpc3BsYXlDb3VudCA8IHNvbmdzLmxlbmd0aH1cbiAgICAgICAgICAgIC8+O1xuICAgIH1cbiAgfTtcblxuICBjb25zdCB0aGVtZUNsYXNzZXMgPSBpc0RhcmtNb2RlIFxuICAgID8gJ2JnLWdyYXktOTAwIHRleHQtd2hpdGUnIFxuICAgIDogJ2JnLWdyYXktNTAgdGV4dC1ncmF5LTkwMCc7XG5jb25zdCBzZXRDdXJyZW50VGltZVN0YXRlID0gc2V0Q3VycmVudFRpbWU7XG5cbiAgcmV0dXJuIChcbiAgICBcbiAgICAgIDxkaXYgY2xhc3NOYW1lPXtgbWluLWgtc2NyZWVuICR7dGhlbWVDbGFzc2VzfSByZWxhdGl2ZSBvdmVyZmxvdy1oaWRkZW5gfT5cbiAgICAgICAgey8qIE1haW4gQ29udGVudCAqL31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9e2B0cmFuc2l0aW9uLWFsbCBkdXJhdGlvbi0zMDAgJHtjdXJyZW50U29uZyA/ICdwYi0zNicgOiAncGItMjAnfWB9PlxuICAgICAgICAgIHtyZW5kZXJDb250ZW50KCl9XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIHsvKiBCb3R0b20gTmF2aWdhdGlvbiAqL31cbiAgICAgICAge2N1cnJlbnRQYWdlID09PSAnbWFpbicgJiYgKFxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgZml4ZWQgYm90dG9tLTAgbGVmdC0wIHJpZ2h0LTAgJHtpc0RhcmtNb2RlID8gJ2JnLWdyYXktODAwIGJvcmRlci1ncmF5LTcwMCcgOiAnYmctd2hpdGUgYm9yZGVyLWdyYXktMjAwJ30gYm9yZGVyLXQgei0zMGB9PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWFyb3VuZCBweS0zXCI+XG4gICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRBY3RpdmVUYWIoJ2hvbWUnKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBzcGFjZS15LTEgcC0yIHRyYW5zaXRpb24tY29sb3JzICR7XG4gICAgICAgICAgICAgICAgICBhY3RpdmVUYWIgPT09ICdob21lJyA/ICd0ZXh0LXB1cnBsZS00MDAnIDogaXNEYXJrTW9kZSA/ICd0ZXh0LWdyYXktNDAwJyA6ICd0ZXh0LWdyYXktNjAwJ1xuICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPEhvbWVJY29uIHNpemU9ezI0fSAvPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRleHQteHNcIj5Ib21lPC9zcGFuPlxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldEFjdGl2ZVRhYignc2VhcmNoJyl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgZmxleCBmbGV4LWNvbCBpdGVtcy1jZW50ZXIgc3BhY2UteS0xIHAtMiB0cmFuc2l0aW9uLWNvbG9ycyAke1xuICAgICAgICAgICAgICAgICAgYWN0aXZlVGFiID09PSAnc2VhcmNoJyA/ICd0ZXh0LXB1cnBsZS00MDAnIDogaXNEYXJrTW9kZSA/ICd0ZXh0LWdyYXktNDAwJyA6ICd0ZXh0LWdyYXktNjAwJ1xuICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPFNlYXJjaCBzaXplPXsyNH0gLz5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzXCI+U2VhcmNoPC9zcGFuPlxuICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldEFjdGl2ZVRhYignc2V0dGluZ3MnKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBzcGFjZS15LTEgcC0yIHRyYW5zaXRpb24tY29sb3JzICR7XG4gICAgICAgICAgICAgICAgICBhY3RpdmVUYWIgPT09ICdzZXR0aW5ncycgPyAndGV4dC1wdXJwbGUtNDAwJyA6IGlzRGFya01vZGUgPyAndGV4dC1ncmF5LTQwMCcgOiAndGV4dC1ncmF5LTYwMCdcbiAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxTZXR0aW5ncyBzaXplPXsyNH0gLz5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJ0ZXh0LXhzXCI+U2V0dGluZ3M8L3NwYW4+XG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICl9XG5cbiAgICAgICAgey8qIE11c2ljIFBsYXllciAtIE9ubHkgc2hvdyBpZiBjdXJyZW50U29uZyBleGlzdHMgKi99XG4gICAgICAgIHtjdXJyZW50U29uZyAmJiAoXG4gICAgICAgICAgPD5cbiAgICAgICAgICAgIHshaXNQbGF5ZXJNYXhpbWl6ZWQgPyAoXG4gICAgICAgICAgICAgIDxNaW5pbWl6ZWRQbGF5ZXJcbiAgICAgICAgICAgICAgICBzb25nPXtjdXJyZW50U29uZ31cbiAgICAgICAgICAgICAgICBpc1BsYXlpbmc9e2lzUGxheWluZ31cbiAgICAgICAgICAgICAgICBpbWFnZVVybD17aW1hZ2VVcmxzW2N1cnJlbnRTb25nLmltZ19pZF19XG4gICAgICAgICAgICAgICAgb25Ub2dnbGVQbGF5PXt0b2dnbGVQbGF5fVxuICAgICAgICAgICAgICAgIG9uTWF4aW1pemU9e3RvZ2dsZVBsYXllclNpemV9XG4gICAgICAgICAgICAgICAgb25QcmV2aW91cz17aGFuZGxlUHJldmlvdXN9XG4gICAgICAgICAgICAgICAgb25OZXh0PXtoYW5kbGVOZXh0fVxuICAgICAgICAgICAgICAgIG9uQ2xvc2U9e2Nsb3NlUGxheWVyfVxuICAgICAgICAgICAgICAgIG9uVG9nZ2xlTGlrZT17KCkgPT4gaGFuZGxlVG9nZ2xlTGlrZShjdXJyZW50U29uZy5pZCl9XG4gICAgICAgICAgICAgICAgZm9ybWF0TnVtYmVyPXtmb3JtYXROdW1iZXJ9XG4gICAgICAgICAgICAgICAgY3VycmVudFRpbWU9e2N1cnJlbnRUaW1lfVxuICAgICAgICAgICAgICAgIGR1cmF0aW9uPXtkdXJhdGlvbn1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxNYXhpbWl6ZWRQbGF5ZXJcbiAgICAgICAgICAgICAgICBzb25nPXtjdXJyZW50U29uZ31cbiAgICAgICAgICAgICAgICBpc1BsYXlpbmc9e2lzUGxheWluZ31cbiAgICAgICAgICAgICAgICBpbWFnZVVybD17aW1hZ2VVcmxzW2N1cnJlbnRTb25nLmltZ19pZF19XG4gICAgICAgICAgICAgICAgb25Ub2dnbGVQbGF5PXt0b2dnbGVQbGF5fVxuICAgICAgICAgICAgICAgIG9uTWluaW1pemU9e3RvZ2dsZVBsYXllclNpemV9XG4gICAgICAgICAgICAgICAgb25QcmV2aW91cz17aGFuZGxlUHJldmlvdXN9XG4gICAgICAgICAgICAgICAgb25OZXh0PXtoYW5kbGVOZXh0fVxuICAgICAgICAgICAgICAgIG9uVG9nZ2xlTGlrZT17KCkgPT4gaGFuZGxlVG9nZ2xlTGlrZShjdXJyZW50U29uZy5pZCl9XG4gICAgICAgICAgICAgICAgZm9ybWF0TnVtYmVyPXtmb3JtYXROdW1iZXJ9XG4gICAgICAgICAgICAgICAgb25BZGRUb1BsYXlsaXN0PXsoKSA9PiBoYW5kbGVBZGRUb1BsYXlsaXN0KGN1cnJlbnRTb25nKX1cbiAgICAgICAgICAgICAgICBjdXJyZW50VGltZT17Y3VycmVudFRpbWV9XG4gICAgICAgICAgICAgICAgZHVyYXRpb249e2R1cmF0aW9ufVxuXG4gICAgICAgICAgICAgIHNldEN1cnJlbnRUaW1lPXsoc2Vla1RpbWUpID0+IHtcbiAgaWYgKGF1ZGlvUmVmLmN1cnJlbnQgJiYgIWlzTmFOKGF1ZGlvUmVmLmN1cnJlbnQuZHVyYXRpb24pKSB7XG4gICAgc2V0SXNFeHRlcm5hbGx5U2Vla2luZyh0cnVlKTtcbiAgICBhdWRpb1JlZi5jdXJyZW50LmN1cnJlbnRUaW1lID0gc2Vla1RpbWU7XG4gICAgc2V0Q3VycmVudFRpbWVTdGF0ZShzZWVrVGltZSk7XG4gICAgc2V0VGltZW91dCgoKSA9PiBzZXRJc0V4dGVybmFsbHlTZWVraW5nKGZhbHNlKSwgMjAwKTtcbiAgfSBlbHNlIHtcbiAgICBzZXRQZW5kaW5nU2Vla1RpbWUoc2Vla1RpbWUpOyAvLyBXaWxsIGFwcGx5IG9uTG9hZGVkTWV0YWRhdGFcbiAgfVxufX1cblxuXG5cbiAgICAgICAgICAgICAgICB2b2x1bWU9e3ZvbHVtZX1cbiAgICAgICAgICAgICAgICBzZXRWb2x1bWU9e3NldFZvbHVtZX1cbiAgICAgICAgICAgICAgICBpc1NlZWtpbmc9e2lzU2Vla2luZ31cbiAgICAgICAgICAgICAgICBzZXRJc1NlZWtpbmc9e3NldElzU2Vla2luZ31cbiAgICAgICAgICAgICAgICBxdWV1ZT17cXVldWV9XG4gICAgICAgICAgICAgICAgb25SZW1vdmVGcm9tUXVldWU9e3JlbW92ZUZyb21RdWV1ZX1cbiAgICAgICAgICAgICAgICBvblNvbmdQbGF5PXtoYW5kbGVTb25nUGxheX1cbiAgICAgICAgICAgICAgICBpbWFnZVVybHM9e2ltYWdlVXJsc31cbiAgICAgICAgICAgICAgICBpc1NodWZmbGVFbmFibGVkPXtpc1NodWZmbGVFbmFibGVkfVxuICAgICAgICAgICAgICAgIHNldElzU2h1ZmZsZUVuYWJsZWQ9e3NldElzU2h1ZmZsZUVuYWJsZWR9XG4gICAgICAgICAgICAgICAgcmVwZWF0TW9kZT17cmVwZWF0TW9kZX1cbiAgICAgICAgICAgICAgICBzZXRSZXBlYXRNb2RlPXtzZXRSZXBlYXRNb2RlfVxuICAgICAgICAgICAgICAgIHNsZWVwVGltZXI9e3NsZWVwVGltZXJ9XG4gICAgICAgICAgICAgICAgcmVtYWluaW5nVGltZT17cmVtYWluaW5nVGltZX1cbiAgICAgICAgICAgICAgICBvbk9wZW5TbGVlcFRpbWVyPXsoKSA9PiBzZXRTaG93U2xlZXBUaW1lck1vZGFsKHRydWUpfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8Lz5cbiAgICAgICAgKX1cblxuICAgICAgICB7LyogTW9kYWxzICovfVxuICAgICAgICA8Q3JlYXRlUGxheWxpc3RNb2RhbFxuICAgICAgICAgIGlzT3Blbj17c2hvd0NyZWF0ZVBsYXlsaXN0TW9kYWx9XG4gICAgICAgICAgb25DbG9zZT17KCkgPT4gc2V0U2hvd0NyZWF0ZVBsYXlsaXN0TW9kYWwoZmFsc2UpfVxuICAgICAgICAgIG9uQ3JlYXRlUGxheWxpc3Q9e2NyZWF0ZVBsYXlsaXN0fVxuICAgICAgICAvPlxuXG4gICAgICAgIDxBZGRUb1BsYXlsaXN0TW9kYWxcbiAgICAgICAgICBpc09wZW49e3Nob3dBZGRUb1BsYXlsaXN0TW9kYWx9XG4gICAgICAgICAgb25DbG9zZT17KCkgPT4ge1xuICAgICAgICAgICAgc2V0U2hvd0FkZFRvUGxheWxpc3RNb2RhbChmYWxzZSk7XG4gICAgICAgICAgICBzZXRTZWxlY3RlZFNvbmdGb3JQbGF5bGlzdChudWxsKTtcbiAgICAgICAgICB9fVxuICAgICAgICAgIHNvbmc9e3NlbGVjdGVkU29uZ0ZvclBsYXlsaXN0fVxuICAgICAgICAgIHBsYXlsaXN0cz17cGxheWxpc3RzfVxuICAgICAgICAgIG9uQWRkVG9QbGF5bGlzdD17YWRkU29uZ1RvUGxheWxpc3R9XG4gICAgICAgICAgb25DcmVhdGVQbGF5bGlzdD17KCkgPT4ge1xuICAgICAgICAgICAgc2V0U2hvd0FkZFRvUGxheWxpc3RNb2RhbChmYWxzZSk7XG4gICAgICAgICAgICBzZXRTaG93Q3JlYXRlUGxheWxpc3RNb2RhbCh0cnVlKTtcbiAgICAgICAgICB9fVxuICAgICAgICAgIGltYWdlVXJscz17aW1hZ2VVcmxzfVxuICAgICAgICAgIHNldEltYWdlVXJscz17c2V0SW1hZ2VVcmxzfVxuICAgICAgICAvPlxuXG4gICAgICAgIDxTbGVlcFRpbWVyTW9kYWxcbiAgICAgICAgICBpc09wZW49e3Nob3dTbGVlcFRpbWVyTW9kYWx9XG4gICAgICAgICAgb25DbG9zZT17KCkgPT4gc2V0U2hvd1NsZWVwVGltZXJNb2RhbChmYWxzZSl9XG4gICAgICAgICAgb25TZXRUaW1lcj17aGFuZGxlU2xlZXBUaW1lclNldH1cbiAgICAgICAgICBjdXJyZW50VGltZXI9e3NsZWVwVGltZXJ9XG4gICAgICAgIC8+XG4gICAgICAgIDxhdWRpb1xuICAgICAgICAgIHJlZj17YXVkaW9SZWZ9XG4gICAgICAgICAgc3JjPXthdWRpb1VybCA/PyB1bmRlZmluZWR9XG4gICAgICAgICAgb25FbmRlZD17aGFuZGxlU29uZ0VuZH1cbiAgICAgICAgICBvblRpbWVVcGRhdGU9eygpID0+IHtcbiAgICAgICAgICBpZiAoYXVkaW9SZWYuY3VycmVudCAmJiAhaXNTZWVraW5nICYmICFpc0V4dGVybmFsbHlTZWVraW5nKSB7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50ID0gYXVkaW9SZWYuY3VycmVudC5jdXJyZW50VGltZTtcbiAgICAgICAgICAgIC8vIE9ubHkgdXBkYXRlIHN0YXRlIGlmIHRoZSBkaWZmZXJlbmNlIGlzIHNpZ25pZmljYW50XG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMoY3VycmVudFRpbWUgLSBjdXJyZW50KSA+IDAuMjUpIHtcbiAgICAgICAgICAgICAgc2V0Q3VycmVudFRpbWUoY3VycmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9fVxuXG5cbiAgICAgICAgICBvbkxvYWRlZE1ldGFkYXRhPXtoYW5kbGVMb2FkZWRNZXRhZGF0YX1cbiAgICAgICAgICBvblZvbHVtZUNoYW5nZT17KCkgPT4ge1xuICAgICAgICAgICAgaWYgKGF1ZGlvUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgc2V0Vm9sdW1lKGF1ZGlvUmVmLmN1cnJlbnQudm9sdW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9fVxuICAgICAgICAgIHN0eWxlPXt7IGRpc3BsYXk6ICdub25lJyB9fVxuICAgICAgICAvPlxuXG4gICAgICA8L2Rpdj5cbiAgKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gTXVzaWNQbGF5ZXJBcHAoKSB7XG4gIHJldHVybiAoXG4gICAgPEF1dGhXcmFwcGVyPlxuICAgICAgPFRvYXN0ZXIgcG9zaXRpb249XCJib3R0b20tY2VudGVyXCIgLz5cbiAgICAgIDxNdXNpY1BsYXllckNvbnRlbnQgLz5cbiAgICA8L0F1dGhXcmFwcGVyPlxuICApO1xufSJdLCJuYW1lcyI6WyJSZWFjdCIsInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlUmVmIiwiSG9tZSIsIkhvbWVJY29uIiwiU2VhcmNoIiwiU2V0dGluZ3MiLCJIb21lUGFnZSIsIlNlYXJjaFBhZ2UiLCJTZXR0aW5nc1BhZ2UiLCJQbGF5bGlzdHNQYWdlIiwiTGlrZWRTb25nc1BhZ2UiLCJNaW5pbWl6ZWRQbGF5ZXIiLCJNYXhpbWl6ZWRQbGF5ZXIiLCJDcmVhdGVQbGF5bGlzdE1vZGFsIiwiQWRkVG9QbGF5bGlzdE1vZGFsIiwiQXV0aFdyYXBwZXIiLCJTbGVlcFRpbWVyTW9kYWwiLCJ1c2VBdXRoIiwidXNlU3VwYWJhc2VEYXRhIiwidXNlUXVldWUiLCJ1c2VTbGVlcFRpbWVyIiwidXNlVGhlbWUiLCJUb2FzdGVyIiwidG9hc3QiLCJNdXNpY1BsYXllckNvbnRlbnQiLCJ1c2VyIiwic29uZ3MiLCJwbGF5bGlzdHMiLCJsaWtlZFNvbmdzIiwibGFzdFBsYXllZFNvbmciLCJsb2FkaW5nIiwidG9nZ2xlTGlrZSIsImNyZWF0ZVBsYXlsaXN0IiwiZGVsZXRlUGxheWxpc3QiLCJyZW5hbWVQbGF5bGlzdCIsImFkZFNvbmdUb1BsYXlsaXN0IiwicmVtb3ZlU29uZ0Zyb21QbGF5bGlzdCIsInJlY29yZExpc3RlbmluZ0hpc3RvcnkiLCJzdG9wQ3VycmVudFNvbmdUcmFja2luZyIsImdldFBlcnNvbmFsaXplZFNvbmdzIiwiZ2V0U21hcnRQZXJzb25hbGl6ZWRTb25ncyIsInF1ZXVlIiwiYWRkVG9RdWV1ZSIsInJlbW92ZUZyb21RdWV1ZSIsImdldE5leHRTb25nRnJvbVF1ZXVlIiwiY2xlYXJRdWV1ZSIsImhhc1F1ZXVlIiwiYWN0aXZlVGFiIiwic2V0QWN0aXZlVGFiIiwiY3VycmVudFBhZ2UiLCJzZXRDdXJyZW50UGFnZSIsImN1cnJlbnRTb25nIiwic2V0Q3VycmVudFNvbmciLCJpc1BsYXlpbmciLCJzZXRJc1BsYXlpbmciLCJpc1BsYXllck1heGltaXplZCIsInNldElzUGxheWVyTWF4aW1pemVkIiwic2hvd0NyZWF0ZVBsYXlsaXN0TW9kYWwiLCJzZXRTaG93Q3JlYXRlUGxheWxpc3RNb2RhbCIsInNob3dBZGRUb1BsYXlsaXN0TW9kYWwiLCJzZXRTaG93QWRkVG9QbGF5bGlzdE1vZGFsIiwic2hvd1NsZWVwVGltZXJNb2RhbCIsInNldFNob3dTbGVlcFRpbWVyTW9kYWwiLCJzZWxlY3RlZFNvbmdGb3JQbGF5bGlzdCIsInNldFNlbGVjdGVkU29uZ0ZvclBsYXlsaXN0IiwiaGFzU2V0TGFzdFBsYXllZFNvbmciLCJzZXRIYXNTZXRMYXN0UGxheWVkU29uZyIsImxhc3RQbGF5ZWRTb25nRGlzbWlzc2VkIiwic2V0TGFzdFBsYXllZFNvbmdEaXNtaXNzZWQiLCJpc0RhcmtNb2RlIiwidG9nZ2xlVGhlbWUiLCJkaXNwbGF5Q291bnQiLCJzZXREaXNwbGF5Q291bnQiLCJpbWFnZVVybHMiLCJzZXRJbWFnZVVybHMiLCJhdWRpb1VybCIsInNldEF1ZGlvVXJsIiwiYXVkaW9SZWYiLCJjdXJyZW50VGltZSIsInNldEN1cnJlbnRUaW1lIiwiZHVyYXRpb24iLCJzZXREdXJhdGlvbiIsInZvbHVtZSIsInNldFZvbHVtZSIsImlzU2Vla2luZyIsInNldElzU2Vla2luZyIsInBlbmRpbmdTZWVrVGltZSIsInNldFBlbmRpbmdTZWVrVGltZSIsImlzRXh0ZXJuYWxseVNlZWtpbmciLCJzZXRJc0V4dGVybmFsbHlTZWVraW5nIiwicmVjb21tZW5kZWRRdWV1ZSIsInNldFJlY29tbWVuZGVkUXVldWUiLCJwbGF5ZWRTb25ncyIsInNldFBsYXllZFNvbmdzIiwiU2V0IiwicGVyc29uYWxpemVkTGlzdCIsInNldFBlcnNvbmFsaXplZExpc3QiLCJjdXJyZW50U29uZ0luZGV4Iiwic2V0Q3VycmVudFNvbmdJbmRleCIsImxpc3RlbmVkU29uZ3MiLCJzZXRMaXN0ZW5lZFNvbmdzIiwiaXNGZXRjaGluZ01vcmUiLCJzZXRJc0ZldGNoaW5nTW9yZSIsImN1cnJlbnRCYXRjaExpc3RlbmVkU29uZ3MiLCJzZXRDdXJyZW50QmF0Y2hMaXN0ZW5lZFNvbmdzIiwic29uZ1N0YXJ0VGltZSIsInNldFNvbmdTdGFydFRpbWUiLCJiYXRjaFN0YXJ0SW5kZXgiLCJzZXRCYXRjaFN0YXJ0SW5kZXgiLCJpc1NodWZmbGVFbmFibGVkIiwic2V0SXNTaHVmZmxlRW5hYmxlZCIsInJlcGVhdE1vZGUiLCJzZXRSZXBlYXRNb2RlIiwic2xlZXBUaW1lciIsInJlbWFpbmluZ1RpbWUiLCJzdGFydFRpbWVyIiwiY2FuY2VsVGltZXIiLCJ0cmlnZ2VyQWZ0ZXJTb25nVGltZXIiLCJpc0FjdGl2ZSIsImlzU2xlZXBUaW1lckFjdGl2ZSIsImxvYWRNb3JlU29uZ3MiLCJwcmV2IiwiZGlzcGxheWVkU29uZ3MiLCJzbGljZSIsImxvYWRBdWRpbyIsImZpbGVfaWQiLCJ1cmwiLCJjdXJyZW50IiwiYXVkaW8iLCJpc05hTiIsInBsYXkiLCJjYXRjaCIsImUiLCJjb25zb2xlIiwiZXJyb3IiLCJwYXVzZSIsImZldGNoSW1hZ2VzIiwibmV3VXJscyIsInNvbmdzVG9Mb2FkIiwic29uZyIsImlkIiwiaW1nX2lkIiwicGxheWxpc3QiLCJPYmplY3QiLCJrZXlzIiwibGVuZ3RoIiwibG9nIiwibG9hZExhc3RQbGF5ZWRJbWFnZSIsImluaXRpYWxSZWNzIiwiZmlsdGVyZWQiLCJmaWx0ZXIiLCJoYXMiLCJ0b1N0cmluZyIsIm5ld1BlcnNvbmFsaXplZExpc3QiLCJuZXdTZXQiLCJhZGQiLCJBcnJheSIsImZyb20iLCJoYW5kbGVTb25nUGxheSIsImxpc3RlbkR1cmF0aW9uIiwiRGF0ZSIsImdldFRpbWUiLCJuYW1lIiwidG9GaXhlZCIsImV4aXN0cyIsInNvbWUiLCJzIiwidXBkYXRlZCIsIm1hcCIsInJlY3MiLCJoYW5kbGVBZGRUb1F1ZXVlIiwic3VjY2VzcyIsInRvZ2dsZVBsYXkiLCJ0b2dnbGVQbGF5ZXJTaXplIiwiY2xvc2VQbGF5ZXIiLCJoYW5kbGVUb2dnbGVMaWtlIiwic29uZ0lkIiwiaXNMaWtlZCIsImhhbmRsZVByZXZpb3VzIiwicHJldkluZGV4IiwicHJldlNvbmciLCJuZXdVcmwiLCJjdXJyZW50SW5kZXgiLCJmaW5kSW5kZXgiLCJuZXh0SW5kZXgiLCJuZXh0U29uZyIsImhhbmRsZUxvYWRlZE1ldGFkYXRhIiwibG9hZGVkRHVyYXRpb24iLCJpc0Zpbml0ZSIsImVyciIsInNldFRpbWVvdXQiLCJoYW5kbGVOZXh0IiwibmV4dFF1ZXVlU29uZyIsIm5ld1JlY3MiLCJleGlzdGluZyIsIlN0cmluZyIsIndhcm4iLCJmb3JtYXROdW1iZXIiLCJudW0iLCJoYW5kbGVBZGRUb1BsYXlsaXN0IiwiaGFuZGxlU29uZ0VuZCIsImhhbmRsZVNsZWVwVGltZXJTZXQiLCJtaW51dGVzIiwicmVuZGVyQ29udGVudCIsIm9uQmFjayIsIm9uU29uZ1BsYXkiLCJvbkFkZFRvUXVldWUiLCJvbkNyZWF0ZVBsYXlsaXN0Iiwib25EZWxldGVQbGF5bGlzdCIsIm9uUmVuYW1lUGxheWxpc3QiLCJvblJlbW92ZVNvbmdGcm9tUGxheWxpc3QiLCJvbkFkZFRvUGxheWxpc3QiLCJvbkxvYWRNb3JlIiwiaGFzTW9yZVNvbmdzIiwib25QbGF5bGlzdHNDbGljayIsIm9uTGlrZWRDbGljayIsInRoZW1lQ2xhc3NlcyIsInNldEN1cnJlbnRUaW1lU3RhdGUiLCJkaXYiLCJjbGFzc05hbWUiLCJidXR0b24iLCJvbkNsaWNrIiwic2l6ZSIsInNwYW4iLCJpbWFnZVVybCIsIm9uVG9nZ2xlUGxheSIsIm9uTWF4aW1pemUiLCJvblByZXZpb3VzIiwib25OZXh0Iiwib25DbG9zZSIsIm9uVG9nZ2xlTGlrZSIsIm9uTWluaW1pemUiLCJzZWVrVGltZSIsIm9uUmVtb3ZlRnJvbVF1ZXVlIiwib25PcGVuU2xlZXBUaW1lciIsImlzT3BlbiIsIm9uU2V0VGltZXIiLCJjdXJyZW50VGltZXIiLCJyZWYiLCJzcmMiLCJ1bmRlZmluZWQiLCJvbkVuZGVkIiwib25UaW1lVXBkYXRlIiwiTWF0aCIsImFicyIsIm9uTG9hZGVkTWV0YWRhdGEiLCJvblZvbHVtZUNoYW5nZSIsInN0eWxlIiwiZGlzcGxheSIsIk11c2ljUGxheWVyQXBwIiwicG9zaXRpb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./app/page.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./components/SleepTimerModal.tsx":
/*!****************************************!*\
  !*** ./components/SleepTimerModal.tsx ***!
  \****************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _barrel_optimize_names_Clock_Moon_Music_X_lucide_react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! __barrel_optimize__?names=Clock,Moon,Music,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/moon.js\");\n/* harmony import */ var _barrel_optimize_names_Clock_Moon_Music_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! __barrel_optimize__?names=Clock,Moon,Music,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/x.js\");\n/* harmony import */ var _barrel_optimize_names_Clock_Moon_Music_X_lucide_react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! __barrel_optimize__?names=Clock,Moon,Music,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/music.js\");\n/* harmony import */ var _barrel_optimize_names_Clock_Moon_Music_X_lucide_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! __barrel_optimize__?names=Clock,Moon,Music,X!=!lucide-react */ \"(app-pages-browser)/./node_modules/lucide-react/dist/esm/icons/clock.js\");\n/* harmony import */ var _components_ThemeContext__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/ThemeContext */ \"(app-pages-browser)/./components/ThemeContext.tsx\");\n\nvar _s = $RefreshSig$();\n\n\n\nconst SleepTimerModal = (param)=>{\n    let { isOpen, onClose, onSetTimer, currentTimer } = param;\n    _s();\n    const { isDarkMode } = (0,_components_ThemeContext__WEBPACK_IMPORTED_MODULE_2__.useTheme)();\n    const [selectedOption, setSelectedOption] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    if (!isOpen) return null;\n    const timeOptions = [\n        5,\n        10,\n        15,\n        30,\n        45,\n        60\n    ];\n    const handleSetTimer = ()=>{\n        if (selectedOption !== null) {\n            onSetTimer(selectedOption);\n            onClose();\n        }\n    };\n    const handleCancelTimer = ()=>{\n        onSetTimer(null);\n        onClose();\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            className: \"\".concat(isDarkMode ? \"bg-gray-800\" : \"bg-white\", \" rounded-lg p-6 w-full max-w-md\"),\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex items-center justify-between mb-6\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"flex items-center\",\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Clock_Moon_Music_X_lucide_react__WEBPACK_IMPORTED_MODULE_3__[\"default\"], {\n                                    className: \"mr-2 text-purple-400\",\n                                    size: 24\n                                }, void 0, false, {\n                                    fileName: \"/home/project/components/SleepTimerModal.tsx\",\n                                    lineNumber: 42,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"h2\", {\n                                    className: \"text-2xl font-bold\",\n                                    children: \"Sleep Timer\"\n                                }, void 0, false, {\n                                    fileName: \"/home/project/components/SleepTimerModal.tsx\",\n                                    lineNumber: 43,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/project/components/SleepTimerModal.tsx\",\n                            lineNumber: 41,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: onClose,\n                            className: \"p-2 \".concat(isDarkMode ? \"hover:bg-gray-700\" : \"hover:bg-gray-100\", \" rounded-full transition-colors\"),\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Clock_Moon_Music_X_lucide_react__WEBPACK_IMPORTED_MODULE_4__[\"default\"], {\n                                size: 20\n                            }, void 0, false, {\n                                fileName: \"/home/project/components/SleepTimerModal.tsx\",\n                                lineNumber: 49,\n                                columnNumber: 13\n                            }, undefined)\n                        }, void 0, false, {\n                            fileName: \"/home/project/components/SleepTimerModal.tsx\",\n                            lineNumber: 45,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/project/components/SleepTimerModal.tsx\",\n                    lineNumber: 40,\n                    columnNumber: 9\n                }, undefined),\n                currentTimer && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"mb-4 p-3 \".concat(isDarkMode ? \"bg-gray-700\" : \"bg-gray-100\", \" rounded-lg\"),\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"p\", {\n                        className: \"text-sm \".concat(isDarkMode ? \"text-gray-300\" : \"text-gray-600\"),\n                        children: [\n                            \"Current timer: \",\n                            typeof currentTimer === \"number\" ? \"\".concat(currentTimer, \" minutes\") : \"After current song\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/home/project/components/SleepTimerModal.tsx\",\n                        lineNumber: 55,\n                        columnNumber: 13\n                    }, undefined)\n                }, void 0, false, {\n                    fileName: \"/home/project/components/SleepTimerModal.tsx\",\n                    lineNumber: 54,\n                    columnNumber: 11\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"space-y-3 mb-6\",\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: ()=>setSelectedOption(\"after-song\"),\n                            className: \"w-full flex items-center p-4 rounded-lg border-2 transition-colors \".concat(selectedOption === \"after-song\" ? \"border-purple-500 bg-purple-500/10\" : isDarkMode ? \"border-gray-600 bg-gray-700 hover:bg-gray-600\" : \"border-gray-200 bg-gray-50 hover:bg-gray-100\"),\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Clock_Moon_Music_X_lucide_react__WEBPACK_IMPORTED_MODULE_5__[\"default\"], {\n                                    className: \"mr-3 text-purple-400\",\n                                    size: 20\n                                }, void 0, false, {\n                                    fileName: \"/home/project/components/SleepTimerModal.tsx\",\n                                    lineNumber: 73,\n                                    columnNumber: 13\n                                }, undefined),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                    className: \"font-medium\",\n                                    children: \"After current song\"\n                                }, void 0, false, {\n                                    fileName: \"/home/project/components/SleepTimerModal.tsx\",\n                                    lineNumber: 74,\n                                    columnNumber: 13\n                                }, undefined)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/home/project/components/SleepTimerModal.tsx\",\n                            lineNumber: 63,\n                            columnNumber: 11\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            className: \"grid grid-cols-2 gap-3\",\n                            children: timeOptions.map((minutes)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                                    onClick: ()=>setSelectedOption(minutes),\n                                    className: \"flex items-center justify-center p-4 rounded-lg border-2 transition-colors \".concat(selectedOption === minutes ? \"border-purple-500 bg-purple-500/10\" : isDarkMode ? \"border-gray-600 bg-gray-700 hover:bg-gray-600\" : \"border-gray-200 bg-gray-50 hover:bg-gray-100\"),\n                                    children: [\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_barrel_optimize_names_Clock_Moon_Music_X_lucide_react__WEBPACK_IMPORTED_MODULE_6__[\"default\"], {\n                                            className: \"mr-2 text-purple-400\",\n                                            size: 16\n                                        }, void 0, false, {\n                                            fileName: \"/home/project/components/SleepTimerModal.tsx\",\n                                            lineNumber: 91,\n                                            columnNumber: 17\n                                        }, undefined),\n                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                                            className: \"font-medium\",\n                                            children: [\n                                                minutes,\n                                                \" min\"\n                                            ]\n                                        }, void 0, true, {\n                                            fileName: \"/home/project/components/SleepTimerModal.tsx\",\n                                            lineNumber: 92,\n                                            columnNumber: 17\n                                        }, undefined)\n                                    ]\n                                }, minutes, true, {\n                                    fileName: \"/home/project/components/SleepTimerModal.tsx\",\n                                    lineNumber: 80,\n                                    columnNumber: 15\n                                }, undefined))\n                        }, void 0, false, {\n                            fileName: \"/home/project/components/SleepTimerModal.tsx\",\n                            lineNumber: 78,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/project/components/SleepTimerModal.tsx\",\n                    lineNumber: 61,\n                    columnNumber: 9\n                }, undefined),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"flex space-x-3\",\n                    children: [\n                        currentTimer && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: handleCancelTimer,\n                            className: \"flex-1 \".concat(isDarkMode ? \"bg-gray-700 hover:bg-gray-600\" : \"bg-gray-200 hover:bg-gray-300\", \" py-3 rounded-lg font-medium transition-colors\"),\n                            children: \"Cancel Timer\"\n                        }, void 0, false, {\n                            fileName: \"/home/project/components/SleepTimerModal.tsx\",\n                            lineNumber: 100,\n                            columnNumber: 13\n                        }, undefined),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                            onClick: handleSetTimer,\n                            disabled: selectedOption === null,\n                            className: \"flex-1 bg-purple-500 hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed text-white py-3 rounded-lg font-medium transition-colors\",\n                            children: \"Set Timer\"\n                        }, void 0, false, {\n                            fileName: \"/home/project/components/SleepTimerModal.tsx\",\n                            lineNumber: 107,\n                            columnNumber: 11\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/home/project/components/SleepTimerModal.tsx\",\n                    lineNumber: 98,\n                    columnNumber: 9\n                }, undefined)\n            ]\n        }, void 0, true, {\n            fileName: \"/home/project/components/SleepTimerModal.tsx\",\n            lineNumber: 39,\n            columnNumber: 7\n        }, undefined)\n    }, void 0, false, {\n        fileName: \"/home/project/components/SleepTimerModal.tsx\",\n        lineNumber: 38,\n        columnNumber: 5\n    }, undefined);\n};\n_s(SleepTimerModal, \"kvL4Akmmr71u4x14bsA/0Wao1xU=\", false, function() {\n    return [\n        _components_ThemeContext__WEBPACK_IMPORTED_MODULE_2__.useTheme\n    ];\n});\n_c = SleepTimerModal;\n/* harmony default export */ __webpack_exports__[\"default\"] = (SleepTimerModal);\nvar _c;\n$RefreshReg$(_c, \"SleepTimerModal\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2NvbXBvbmVudHMvU2xlZXBUaW1lck1vZGFsLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUF3QztBQUNhO0FBQ0E7QUFTckQsTUFBTU8sa0JBQWtEO1FBQUMsRUFDdkRDLE1BQU0sRUFDTkMsT0FBTyxFQUNQQyxVQUFVLEVBQ1ZDLFlBQVksRUFDYjs7SUFDQyxNQUFNLEVBQUVDLFVBQVUsRUFBRSxHQUFHTixrRUFBUUE7SUFDL0IsTUFBTSxDQUFDTyxnQkFBZ0JDLGtCQUFrQixHQUFHYiwrQ0FBUUEsQ0FBK0I7SUFFbkYsSUFBSSxDQUFDTyxRQUFRLE9BQU87SUFFcEIsTUFBTU8sY0FBYztRQUFDO1FBQUc7UUFBSTtRQUFJO1FBQUk7UUFBSTtLQUFHO0lBRTNDLE1BQU1DLGlCQUFpQjtRQUNyQixJQUFJSCxtQkFBbUIsTUFBTTtZQUMzQkgsV0FBV0c7WUFDWEo7UUFDRjtJQUNGO0lBRUEsTUFBTVEsb0JBQW9CO1FBQ3hCUCxXQUFXO1FBQ1hEO0lBQ0Y7SUFFQSxxQkFDRSw4REFBQ1M7UUFBSUMsV0FBVTtrQkFDYiw0RUFBQ0Q7WUFBSUMsV0FBVyxHQUEyQyxPQUF4Q1AsYUFBYSxnQkFBZ0IsWUFBVzs7OEJBQ3pELDhEQUFDTTtvQkFBSUMsV0FBVTs7c0NBQ2IsOERBQUNEOzRCQUFJQyxXQUFVOzs4Q0FDYiw4REFBQ2hCLDhGQUFJQTtvQ0FBQ2dCLFdBQVU7b0NBQXVCQyxNQUFNOzs7Ozs7OENBQzdDLDhEQUFDQztvQ0FBR0YsV0FBVTs4Q0FBcUI7Ozs7Ozs7Ozs7OztzQ0FFckMsOERBQUNHOzRCQUNDQyxTQUFTZDs0QkFDVFUsV0FBVyxPQUE4RCxPQUF2RFAsYUFBYSxzQkFBc0IscUJBQW9CO3NDQUV6RSw0RUFBQ1YsOEZBQUNBO2dDQUFDa0IsTUFBTTs7Ozs7Ozs7Ozs7Ozs7Ozs7Z0JBSVpULDhCQUNDLDhEQUFDTztvQkFBSUMsV0FBVyxZQUF1RCxPQUEzQ1AsYUFBYSxnQkFBZ0IsZUFBYzs4QkFDckUsNEVBQUNZO3dCQUFFTCxXQUFXLFdBQTBELE9BQS9DUCxhQUFhLGtCQUFrQjs7NEJBQW1COzRCQUN6RCxPQUFPRCxpQkFBaUIsV0FBVyxHQUFnQixPQUFiQSxjQUFhLGNBQVk7Ozs7Ozs7Ozs7Ozs4QkFLckYsOERBQUNPO29CQUFJQyxXQUFVOztzQ0FFYiw4REFBQ0c7NEJBQ0NDLFNBQVMsSUFBTVQsa0JBQWtCOzRCQUNqQ0ssV0FBVyxzRUFNVixPQUxDTixtQkFBbUIsZUFDZix1Q0FDQUQsYUFDQSxrREFDQTs7OENBR04sOERBQUNQLDhGQUFLQTtvQ0FBQ2MsV0FBVTtvQ0FBdUJDLE1BQU07Ozs7Ozs4Q0FDOUMsOERBQUNLO29DQUFLTixXQUFVOzhDQUFjOzs7Ozs7Ozs7Ozs7c0NBSWhDLDhEQUFDRDs0QkFBSUMsV0FBVTtzQ0FDWkosWUFBWVcsR0FBRyxDQUFDLENBQUNDLHdCQUNoQiw4REFBQ0w7b0NBRUNDLFNBQVMsSUFBTVQsa0JBQWtCYTtvQ0FDakNSLFdBQVcsOEVBTVYsT0FMQ04sbUJBQW1CYyxVQUNmLHVDQUNBZixhQUNBLGtEQUNBOztzREFHTiw4REFBQ1IsOEZBQUtBOzRDQUFDZSxXQUFVOzRDQUF1QkMsTUFBTTs7Ozs7O3NEQUM5Qyw4REFBQ0s7NENBQUtOLFdBQVU7O2dEQUFlUTtnREFBUTs7Ozs7Ozs7bUNBWGxDQTs7Ozs7Ozs7Ozs7Ozs7Ozs4QkFpQmIsOERBQUNUO29CQUFJQyxXQUFVOzt3QkFDWlIsOEJBQ0MsOERBQUNXOzRCQUNDQyxTQUFTTjs0QkFDVEUsV0FBVyxVQUF5RixPQUEvRVAsYUFBYSxrQ0FBa0MsaUNBQWdDO3NDQUNyRzs7Ozs7O3NDQUlILDhEQUFDVTs0QkFDQ0MsU0FBU1A7NEJBQ1RZLFVBQVVmLG1CQUFtQjs0QkFDN0JNLFdBQVU7c0NBQ1g7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBT1g7R0ExR01aOztRQU1tQkQsOERBQVFBOzs7S0FOM0JDO0FBNEdOLCtEQUFlQSxlQUFlQSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2NvbXBvbmVudHMvU2xlZXBUaW1lck1vZGFsLnRzeD9jMDE4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IFgsIE1vb24sIENsb2NrLCBNdXNpYyB9IGZyb20gJ2x1Y2lkZS1yZWFjdCc7XG5pbXBvcnQgeyB1c2VUaGVtZSB9IGZyb20gJ0AvY29tcG9uZW50cy9UaGVtZUNvbnRleHQnO1xuXG5pbnRlcmZhY2UgU2xlZXBUaW1lck1vZGFsUHJvcHMge1xuICBpc09wZW46IGJvb2xlYW47XG4gIG9uQ2xvc2U6ICgpID0+IHZvaWQ7XG4gIG9uU2V0VGltZXI6IChtaW51dGVzOiBudW1iZXIgfCAnYWZ0ZXItc29uZycpID0+IHZvaWQ7XG4gIGN1cnJlbnRUaW1lcj86IG51bWJlciB8ICdhZnRlci1zb25nJyB8IG51bGw7XG59XG5cbmNvbnN0IFNsZWVwVGltZXJNb2RhbDogUmVhY3QuRkM8U2xlZXBUaW1lck1vZGFsUHJvcHM+ID0gKHtcbiAgaXNPcGVuLFxuICBvbkNsb3NlLFxuICBvblNldFRpbWVyLFxuICBjdXJyZW50VGltZXJcbn0pID0+IHtcbiAgY29uc3QgeyBpc0RhcmtNb2RlIH0gPSB1c2VUaGVtZSgpO1xuICBjb25zdCBbc2VsZWN0ZWRPcHRpb24sIHNldFNlbGVjdGVkT3B0aW9uXSA9IHVzZVN0YXRlPG51bWJlciB8ICdhZnRlci1zb25nJyB8IG51bGw+KG51bGwpO1xuXG4gIGlmICghaXNPcGVuKSByZXR1cm4gbnVsbDtcblxuICBjb25zdCB0aW1lT3B0aW9ucyA9IFs1LCAxMCwgMTUsIDMwLCA0NSwgNjBdO1xuXG4gIGNvbnN0IGhhbmRsZVNldFRpbWVyID0gKCkgPT4ge1xuICAgIGlmIChzZWxlY3RlZE9wdGlvbiAhPT0gbnVsbCkge1xuICAgICAgb25TZXRUaW1lcihzZWxlY3RlZE9wdGlvbik7XG4gICAgICBvbkNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUNhbmNlbFRpbWVyID0gKCkgPT4ge1xuICAgIG9uU2V0VGltZXIobnVsbCBhcyBhbnkpO1xuICAgIG9uQ2xvc2UoKTtcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwiZml4ZWQgaW5zZXQtMCBiZy1ibGFjay81MCB6LTUwIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHAtNFwiPlxuICAgICAgPGRpdiBjbGFzc05hbWU9e2Ake2lzRGFya01vZGUgPyAnYmctZ3JheS04MDAnIDogJ2JnLXdoaXRlJ30gcm91bmRlZC1sZyBwLTYgdy1mdWxsIG1heC13LW1kYH0+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIG1iLTZcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICA8TW9vbiBjbGFzc05hbWU9XCJtci0yIHRleHQtcHVycGxlLTQwMFwiIHNpemU9ezI0fSAvPlxuICAgICAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQtMnhsIGZvbnQtYm9sZFwiPlNsZWVwIFRpbWVyPC9oMj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBvbkNsaWNrPXtvbkNsb3NlfVxuICAgICAgICAgICAgY2xhc3NOYW1lPXtgcC0yICR7aXNEYXJrTW9kZSA/ICdob3ZlcjpiZy1ncmF5LTcwMCcgOiAnaG92ZXI6YmctZ3JheS0xMDAnfSByb3VuZGVkLWZ1bGwgdHJhbnNpdGlvbi1jb2xvcnNgfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxYIHNpemU9ezIwfSAvPlxuICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7Y3VycmVudFRpbWVyICYmIChcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YG1iLTQgcC0zICR7aXNEYXJrTW9kZSA/ICdiZy1ncmF5LTcwMCcgOiAnYmctZ3JheS0xMDAnfSByb3VuZGVkLWxnYH0+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9e2B0ZXh0LXNtICR7aXNEYXJrTW9kZSA/ICd0ZXh0LWdyYXktMzAwJyA6ICd0ZXh0LWdyYXktNjAwJ31gfT5cbiAgICAgICAgICAgICAgQ3VycmVudCB0aW1lcjoge3R5cGVvZiBjdXJyZW50VGltZXIgPT09ICdudW1iZXInID8gYCR7Y3VycmVudFRpbWVyfSBtaW51dGVzYCA6ICdBZnRlciBjdXJyZW50IHNvbmcnfVxuICAgICAgICAgICAgPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwic3BhY2UteS0zIG1iLTZcIj5cbiAgICAgICAgICB7LyogQWZ0ZXIgY3VycmVudCBzb25nIG9wdGlvbiAqL31cbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTZWxlY3RlZE9wdGlvbignYWZ0ZXItc29uZycpfVxuICAgICAgICAgICAgY2xhc3NOYW1lPXtgdy1mdWxsIGZsZXggaXRlbXMtY2VudGVyIHAtNCByb3VuZGVkLWxnIGJvcmRlci0yIHRyYW5zaXRpb24tY29sb3JzICR7XG4gICAgICAgICAgICAgIHNlbGVjdGVkT3B0aW9uID09PSAnYWZ0ZXItc29uZydcbiAgICAgICAgICAgICAgICA/ICdib3JkZXItcHVycGxlLTUwMCBiZy1wdXJwbGUtNTAwLzEwJ1xuICAgICAgICAgICAgICAgIDogaXNEYXJrTW9kZVxuICAgICAgICAgICAgICAgID8gJ2JvcmRlci1ncmF5LTYwMCBiZy1ncmF5LTcwMCBob3ZlcjpiZy1ncmF5LTYwMCdcbiAgICAgICAgICAgICAgICA6ICdib3JkZXItZ3JheS0yMDAgYmctZ3JheS01MCBob3ZlcjpiZy1ncmF5LTEwMCdcbiAgICAgICAgICAgIH1gfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxNdXNpYyBjbGFzc05hbWU9XCJtci0zIHRleHQtcHVycGxlLTQwMFwiIHNpemU9ezIwfSAvPlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZm9udC1tZWRpdW1cIj5BZnRlciBjdXJyZW50IHNvbmc8L3NwYW4+XG4gICAgICAgICAgPC9idXR0b24+XG5cbiAgICAgICAgICB7LyogVGltZSBvcHRpb25zICovfVxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZ3JpZCBncmlkLWNvbHMtMiBnYXAtM1wiPlxuICAgICAgICAgICAge3RpbWVPcHRpb25zLm1hcCgobWludXRlcykgPT4gKFxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAga2V5PXttaW51dGVzfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFNlbGVjdGVkT3B0aW9uKG1pbnV0ZXMpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIHAtNCByb3VuZGVkLWxnIGJvcmRlci0yIHRyYW5zaXRpb24tY29sb3JzICR7XG4gICAgICAgICAgICAgICAgICBzZWxlY3RlZE9wdGlvbiA9PT0gbWludXRlc1xuICAgICAgICAgICAgICAgICAgICA/ICdib3JkZXItcHVycGxlLTUwMCBiZy1wdXJwbGUtNTAwLzEwJ1xuICAgICAgICAgICAgICAgICAgICA6IGlzRGFya01vZGVcbiAgICAgICAgICAgICAgICAgICAgPyAnYm9yZGVyLWdyYXktNjAwIGJnLWdyYXktNzAwIGhvdmVyOmJnLWdyYXktNjAwJ1xuICAgICAgICAgICAgICAgICAgICA6ICdib3JkZXItZ3JheS0yMDAgYmctZ3JheS01MCBob3ZlcjpiZy1ncmF5LTEwMCdcbiAgICAgICAgICAgICAgICB9YH1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxDbG9jayBjbGFzc05hbWU9XCJtci0yIHRleHQtcHVycGxlLTQwMFwiIHNpemU9ezE2fSAvPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cImZvbnQtbWVkaXVtXCI+e21pbnV0ZXN9IG1pbjwvc3Bhbj5cbiAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IHNwYWNlLXgtM1wiPlxuICAgICAgICAgIHtjdXJyZW50VGltZXIgJiYgKFxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVDYW5jZWxUaW1lcn1cbiAgICAgICAgICAgICAgY2xhc3NOYW1lPXtgZmxleC0xICR7aXNEYXJrTW9kZSA/ICdiZy1ncmF5LTcwMCBob3ZlcjpiZy1ncmF5LTYwMCcgOiAnYmctZ3JheS0yMDAgaG92ZXI6YmctZ3JheS0zMDAnfSBweS0zIHJvdW5kZWQtbGcgZm9udC1tZWRpdW0gdHJhbnNpdGlvbi1jb2xvcnNgfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICBDYW5jZWwgVGltZXJcbiAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICl9XG4gICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgb25DbGljaz17aGFuZGxlU2V0VGltZXJ9XG4gICAgICAgICAgICBkaXNhYmxlZD17c2VsZWN0ZWRPcHRpb24gPT09IG51bGx9XG4gICAgICAgICAgICBjbGFzc05hbWU9XCJmbGV4LTEgYmctcHVycGxlLTUwMCBob3ZlcjpiZy1wdXJwbGUtNjAwIGRpc2FibGVkOm9wYWNpdHktNTAgZGlzYWJsZWQ6Y3Vyc29yLW5vdC1hbGxvd2VkIHRleHQtd2hpdGUgcHktMyByb3VuZGVkLWxnIGZvbnQtbWVkaXVtIHRyYW5zaXRpb24tY29sb3JzXCJcbiAgICAgICAgICA+XG4gICAgICAgICAgICBTZXQgVGltZXJcbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFNsZWVwVGltZXJNb2RhbDsiXSwibmFtZXMiOlsiUmVhY3QiLCJ1c2VTdGF0ZSIsIlgiLCJNb29uIiwiQ2xvY2siLCJNdXNpYyIsInVzZVRoZW1lIiwiU2xlZXBUaW1lck1vZGFsIiwiaXNPcGVuIiwib25DbG9zZSIsIm9uU2V0VGltZXIiLCJjdXJyZW50VGltZXIiLCJpc0RhcmtNb2RlIiwic2VsZWN0ZWRPcHRpb24iLCJzZXRTZWxlY3RlZE9wdGlvbiIsInRpbWVPcHRpb25zIiwiaGFuZGxlU2V0VGltZXIiLCJoYW5kbGVDYW5jZWxUaW1lciIsImRpdiIsImNsYXNzTmFtZSIsInNpemUiLCJoMiIsImJ1dHRvbiIsIm9uQ2xpY2siLCJwIiwic3BhbiIsIm1hcCIsIm1pbnV0ZXMiLCJkaXNhYmxlZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./components/SleepTimerModal.tsx\n"));

/***/ }),

/***/ "(app-pages-browser)/./hooks/useSleepTimer.ts":
/*!********************************!*\
  !*** ./hooks/useSleepTimer.ts ***!
  \********************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useSleepTimer: function() { return /* binding */ useSleepTimer; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n\nfunction useSleepTimer() {\n    const [sleepTimer, setSleepTimer] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [remainingTime, setRemainingTime] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const intervalRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const onTimerEndRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const startTimer = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((minutes, onTimerEnd)=>{\n        // Clear any existing timer\n        if (intervalRef.current) {\n            clearInterval(intervalRef.current);\n        }\n        setSleepTimer(minutes);\n        onTimerEndRef.current = onTimerEnd;\n        if (typeof minutes === \"number\") {\n            setRemainingTime(minutes);\n            intervalRef.current = setInterval(()=>{\n                setRemainingTime((prev)=>{\n                    if (prev === null || prev <= 1) {\n                        // Timer finished\n                        if (intervalRef.current) {\n                            clearInterval(intervalRef.current);\n                            intervalRef.current = null;\n                        }\n                        setSleepTimer(null);\n                        setRemainingTime(null);\n                        // Call the timer end callback\n                        if (onTimerEndRef.current) {\n                            onTimerEndRef.current();\n                        }\n                        return null;\n                    }\n                    return prev - 1;\n                });\n            }, 60000); // Update every minute\n        } else {\n            // 'after-song' mode\n            setRemainingTime(null);\n        }\n    }, []);\n    const cancelTimer = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        if (intervalRef.current) {\n            clearInterval(intervalRef.current);\n            intervalRef.current = null;\n        }\n        setSleepTimer(null);\n        setRemainingTime(null);\n        onTimerEndRef.current = null;\n    }, []);\n    const triggerAfterSongTimer = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{\n        if (sleepTimer === \"after-song\" && onTimerEndRef.current) {\n            setSleepTimer(null);\n            setRemainingTime(null);\n            onTimerEndRef.current();\n            onTimerEndRef.current = null;\n        }\n    }, [\n        sleepTimer\n    ]);\n    // Cleanup on unmount\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        return ()=>{\n            if (intervalRef.current) {\n                clearInterval(intervalRef.current);\n            }\n        };\n    }, []);\n    return {\n        sleepTimer,\n        remainingTime,\n        startTimer,\n        cancelTimer,\n        triggerAfterSongTimer,\n        isActive: sleepTimer !== null\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL2hvb2tzL3VzZVNsZWVwVGltZXIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWlFO0FBRTFELFNBQVNJO0lBQ2QsTUFBTSxDQUFDQyxZQUFZQyxjQUFjLEdBQUdOLCtDQUFRQSxDQUErQjtJQUMzRSxNQUFNLENBQUNPLGVBQWVDLGlCQUFpQixHQUFHUiwrQ0FBUUEsQ0FBZ0I7SUFDbEUsTUFBTVMsY0FBY1AsNkNBQU1BLENBQXdCO0lBQ2xELE1BQU1RLGdCQUFnQlIsNkNBQU1BLENBQXNCO0lBRWxELE1BQU1TLGFBQWFSLGtEQUFXQSxDQUFDLENBQUNTLFNBQWdDQztRQUM5RCwyQkFBMkI7UUFDM0IsSUFBSUosWUFBWUssT0FBTyxFQUFFO1lBQ3ZCQyxjQUFjTixZQUFZSyxPQUFPO1FBQ25DO1FBRUFSLGNBQWNNO1FBQ2RGLGNBQWNJLE9BQU8sR0FBR0Q7UUFFeEIsSUFBSSxPQUFPRCxZQUFZLFVBQVU7WUFDL0JKLGlCQUFpQkk7WUFFakJILFlBQVlLLE9BQU8sR0FBR0UsWUFBWTtnQkFDaENSLGlCQUFpQlMsQ0FBQUE7b0JBQ2YsSUFBSUEsU0FBUyxRQUFRQSxRQUFRLEdBQUc7d0JBQzlCLGlCQUFpQjt3QkFDakIsSUFBSVIsWUFBWUssT0FBTyxFQUFFOzRCQUN2QkMsY0FBY04sWUFBWUssT0FBTzs0QkFDakNMLFlBQVlLLE9BQU8sR0FBRzt3QkFDeEI7d0JBQ0FSLGNBQWM7d0JBQ2RFLGlCQUFpQjt3QkFFakIsOEJBQThCO3dCQUM5QixJQUFJRSxjQUFjSSxPQUFPLEVBQUU7NEJBQ3pCSixjQUFjSSxPQUFPO3dCQUN2Qjt3QkFFQSxPQUFPO29CQUNUO29CQUNBLE9BQU9HLE9BQU87Z0JBQ2hCO1lBQ0YsR0FBRyxRQUFRLHNCQUFzQjtRQUNuQyxPQUFPO1lBQ0wsb0JBQW9CO1lBQ3BCVCxpQkFBaUI7UUFDbkI7SUFDRixHQUFHLEVBQUU7SUFFTCxNQUFNVSxjQUFjZixrREFBV0EsQ0FBQztRQUM5QixJQUFJTSxZQUFZSyxPQUFPLEVBQUU7WUFDdkJDLGNBQWNOLFlBQVlLLE9BQU87WUFDakNMLFlBQVlLLE9BQU8sR0FBRztRQUN4QjtRQUNBUixjQUFjO1FBQ2RFLGlCQUFpQjtRQUNqQkUsY0FBY0ksT0FBTyxHQUFHO0lBQzFCLEdBQUcsRUFBRTtJQUVMLE1BQU1LLHdCQUF3QmhCLGtEQUFXQSxDQUFDO1FBQ3hDLElBQUlFLGVBQWUsZ0JBQWdCSyxjQUFjSSxPQUFPLEVBQUU7WUFDeERSLGNBQWM7WUFDZEUsaUJBQWlCO1lBQ2pCRSxjQUFjSSxPQUFPO1lBQ3JCSixjQUFjSSxPQUFPLEdBQUc7UUFDMUI7SUFDRixHQUFHO1FBQUNUO0tBQVc7SUFFZixxQkFBcUI7SUFDckJKLGdEQUFTQSxDQUFDO1FBQ1IsT0FBTztZQUNMLElBQUlRLFlBQVlLLE9BQU8sRUFBRTtnQkFDdkJDLGNBQWNOLFlBQVlLLE9BQU87WUFDbkM7UUFDRjtJQUNGLEdBQUcsRUFBRTtJQUVMLE9BQU87UUFDTFQ7UUFDQUU7UUFDQUk7UUFDQU87UUFDQUM7UUFDQUMsVUFBVWYsZUFBZTtJQUMzQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2hvb2tzL3VzZVNsZWVwVGltZXIudHM/NjI0ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuXG5leHBvcnQgZnVuY3Rpb24gdXNlU2xlZXBUaW1lcigpIHtcbiAgY29uc3QgW3NsZWVwVGltZXIsIHNldFNsZWVwVGltZXJdID0gdXNlU3RhdGU8bnVtYmVyIHwgJ2FmdGVyLXNvbmcnIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtyZW1haW5pbmdUaW1lLCBzZXRSZW1haW5pbmdUaW1lXSA9IHVzZVN0YXRlPG51bWJlciB8IG51bGw+KG51bGwpO1xuICBjb25zdCBpbnRlcnZhbFJlZiA9IHVzZVJlZjxOb2RlSlMuVGltZW91dCB8IG51bGw+KG51bGwpO1xuICBjb25zdCBvblRpbWVyRW5kUmVmID0gdXNlUmVmPCgoKSA9PiB2b2lkKSB8IG51bGw+KG51bGwpO1xuXG4gIGNvbnN0IHN0YXJ0VGltZXIgPSB1c2VDYWxsYmFjaygobWludXRlczogbnVtYmVyIHwgJ2FmdGVyLXNvbmcnLCBvblRpbWVyRW5kOiAoKSA9PiB2b2lkKSA9PiB7XG4gICAgLy8gQ2xlYXIgYW55IGV4aXN0aW5nIHRpbWVyXG4gICAgaWYgKGludGVydmFsUmVmLmN1cnJlbnQpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxSZWYuY3VycmVudCk7XG4gICAgfVxuXG4gICAgc2V0U2xlZXBUaW1lcihtaW51dGVzKTtcbiAgICBvblRpbWVyRW5kUmVmLmN1cnJlbnQgPSBvblRpbWVyRW5kO1xuXG4gICAgaWYgKHR5cGVvZiBtaW51dGVzID09PSAnbnVtYmVyJykge1xuICAgICAgc2V0UmVtYWluaW5nVGltZShtaW51dGVzKTtcbiAgICAgIFxuICAgICAgaW50ZXJ2YWxSZWYuY3VycmVudCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgc2V0UmVtYWluaW5nVGltZShwcmV2ID0+IHtcbiAgICAgICAgICBpZiAocHJldiA9PT0gbnVsbCB8fCBwcmV2IDw9IDEpIHtcbiAgICAgICAgICAgIC8vIFRpbWVyIGZpbmlzaGVkXG4gICAgICAgICAgICBpZiAoaW50ZXJ2YWxSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsUmVmLmN1cnJlbnQpO1xuICAgICAgICAgICAgICBpbnRlcnZhbFJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNldFNsZWVwVGltZXIobnVsbCk7XG4gICAgICAgICAgICBzZXRSZW1haW5pbmdUaW1lKG51bGwpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDYWxsIHRoZSB0aW1lciBlbmQgY2FsbGJhY2tcbiAgICAgICAgICAgIGlmIChvblRpbWVyRW5kUmVmLmN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgb25UaW1lckVuZFJlZi5jdXJyZW50KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcHJldiAtIDE7XG4gICAgICAgIH0pO1xuICAgICAgfSwgNjAwMDApOyAvLyBVcGRhdGUgZXZlcnkgbWludXRlXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vICdhZnRlci1zb25nJyBtb2RlXG4gICAgICBzZXRSZW1haW5pbmdUaW1lKG51bGwpO1xuICAgIH1cbiAgfSwgW10pO1xuXG4gIGNvbnN0IGNhbmNlbFRpbWVyID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmIChpbnRlcnZhbFJlZi5jdXJyZW50KSB7XG4gICAgICBjbGVhckludGVydmFsKGludGVydmFsUmVmLmN1cnJlbnQpO1xuICAgICAgaW50ZXJ2YWxSZWYuY3VycmVudCA9IG51bGw7XG4gICAgfVxuICAgIHNldFNsZWVwVGltZXIobnVsbCk7XG4gICAgc2V0UmVtYWluaW5nVGltZShudWxsKTtcbiAgICBvblRpbWVyRW5kUmVmLmN1cnJlbnQgPSBudWxsO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgdHJpZ2dlckFmdGVyU29uZ1RpbWVyID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIGlmIChzbGVlcFRpbWVyID09PSAnYWZ0ZXItc29uZycgJiYgb25UaW1lckVuZFJlZi5jdXJyZW50KSB7XG4gICAgICBzZXRTbGVlcFRpbWVyKG51bGwpO1xuICAgICAgc2V0UmVtYWluaW5nVGltZShudWxsKTtcbiAgICAgIG9uVGltZXJFbmRSZWYuY3VycmVudCgpO1xuICAgICAgb25UaW1lckVuZFJlZi5jdXJyZW50ID0gbnVsbDtcbiAgICB9XG4gIH0sIFtzbGVlcFRpbWVyXSk7XG5cbiAgLy8gQ2xlYW51cCBvbiB1bm1vdW50XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChpbnRlcnZhbFJlZi5jdXJyZW50KSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWxSZWYuY3VycmVudCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW10pO1xuXG4gIHJldHVybiB7XG4gICAgc2xlZXBUaW1lcixcbiAgICByZW1haW5pbmdUaW1lLFxuICAgIHN0YXJ0VGltZXIsXG4gICAgY2FuY2VsVGltZXIsXG4gICAgdHJpZ2dlckFmdGVyU29uZ1RpbWVyLFxuICAgIGlzQWN0aXZlOiBzbGVlcFRpbWVyICE9PSBudWxsXG4gIH07XG59Il0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlQ2FsbGJhY2siLCJ1c2VTbGVlcFRpbWVyIiwic2xlZXBUaW1lciIsInNldFNsZWVwVGltZXIiLCJyZW1haW5pbmdUaW1lIiwic2V0UmVtYWluaW5nVGltZSIsImludGVydmFsUmVmIiwib25UaW1lckVuZFJlZiIsInN0YXJ0VGltZXIiLCJtaW51dGVzIiwib25UaW1lckVuZCIsImN1cnJlbnQiLCJjbGVhckludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJwcmV2IiwiY2FuY2VsVGltZXIiLCJ0cmlnZ2VyQWZ0ZXJTb25nVGltZXIiLCJpc0FjdGl2ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./hooks/useSleepTimer.ts\n"));

/***/ })

});